
#include <config/sci.cf>

#ifdef SCI_MESA
#ifdef SCI_MACHINE_Linux
all::
	cd Mesa && make linux-elf
#endif
#endif

#ifdef SCI_MACHINE_Linux
OTHER_SOS = -lDatatypes -lMath -lMesaGL -lMesaGLU
#endif

SUBDIRS = Malloc tcl \
	Multitask Classlib TCL Math Comm Geometry \
	Devices Constraints Geom Dataflow Datatypes Widgets \
	Modules Tester convert

SCISubdirs($(SUBDIRS))

SR_TARGET = sr
SR_SRCS = scirun.cc
SR_OBJS = scirun.o

SR_LDFLAGS = -L$(TOP)/lib -lDataflow -lDevices -lComm -lTCL \
	-lMultitask -lMalloc $(OTHER_SOS)
SCIProgramTarget($(SR_TARGET), $(SR_OBJS), $(SR_LIBS), $(SR_LDFLAGS))

sr: lib/libDataflow.so lib/libTCL.so lib/libDevices.so \
	lib/libComm.so lib/libMultitask.so lib/libMalloc.so

SRCS = $(SR_SRCS)
SCIDependTarget($(SRCS))

World:
	make Makefile
	make Makefiles
	make depend
	make

update:
	cvs update -d
	make World

clean::
	rm -rf templates

installtcl:
	@(cd tcl && make installtcl)
