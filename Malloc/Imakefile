
#include <config/sci.cf>

LOCALINCLUDES = -I.

#ifdef SCI_MACHINE_SGI
LOCKS = lock.o
#endif

OBJS = new.o  malloc.o  Allocator.o  AllocOS.o   $(LOCKS)
SRCS = new.cc malloc.cc Allocator.cc AllocOS.cc \
	test1.cc test2.cc test3.cc test4.cc test5.cc test6.cc \
	test7.cc test8.cc test9.cc test10.cc test11.cc test12.cc \
	test13.cc test14.cc

LIBNAME = Malloc

SCI_CLIBS = -lc
SO_LIBS =
SO_LDFLAGS =

SCIDependTarget($(SRCS))
SCIObjLibraryTarget($(LIBNAME),$(OBJS),$(SO_LIBS),$(SO_LDFLAGS))

#ifdef SCI_MACHINE_SGI
lock.o: lock_mips.s
	as -o lock.o lock_mips.s -mips2
#endif

TEST_LIBS =
TEST_LDFLAGS = -L$(SCILIBDIR) -lMalloc
SCIProgramTarget(test1, test1.o, $(TEST_LIBS), $(TEST_LDFLAGS))
SCIProgramTarget(test2, test2.o, $(TEST_LIBS), $(TEST_LDFLAGS))
SCIProgramTarget(test3, test3.o, $(TEST_LIBS), $(TEST_LDFLAGS))
SCIProgramTarget(test4, test4.o, $(TEST_LIBS), $(TEST_LDFLAGS))
SCIProgramTarget(test5, test5.o, $(TEST_LIBS), $(TEST_LDFLAGS))
SCIProgramTarget(test6, test6.o, $(TEST_LIBS), $(TEST_LDFLAGS))
SCIProgramTarget(test7, test7.o, $(TEST_LIBS), $(TEST_LDFLAGS))
SCIProgramTarget(test8, test8.o, $(TEST_LIBS), $(TEST_LDFLAGS))
SCIProgramTarget(test9, test9.o, $(TEST_LIBS), $(TEST_LDFLAGS))
SCIProgramTarget(test10, test10.o, $(TEST_LIBS), $(TEST_LDFLAGS))
SCIProgramTarget(test11, test11.o, $(TEST_LIBS), $(TEST_LDFLAGS))
SCIProgramTarget(test12, test12.o, $(TEST_LIBS), $(TEST_LDFLAGS))
SCIProgramTarget(test13, test13.o, $(TEST_LIBS), $(TEST_LDFLAGS))
SCIProgramTarget(test14, test14.o, $(TEST_LIBS), $(TEST_LDFLAGS))
