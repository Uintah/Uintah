# SCIRun Network v1.24.1


# Ask SCIRun to tell us where the data is
init_DATADIR_and_DATASET
addSubnetToDatabase {
   set name {TransferFuncHisto}
   set bbox {740 19 923 387}
   set creationDate {Thu Mar 17 2005}
   set creationTime {12:50:39}
   set runDate {}
   set runTime {}
   set notes {}

   # Create a Teem->UnuAtoM->UnuHeq Module
   set m1 [addModuleAtPosition "Teem" "UnuAtoM" "UnuHeq" 740 206]

   # Create a Teem->UnuAtoM->UnuGamma Module
   set m2 [addModuleAtPosition "Teem" "UnuAtoM" "UnuGamma" 740 268]

   # Create a Teem->UnuNtoZ->UnuQuantize Module
   set m3 [addModuleAtPosition "Teem" "UnuNtoZ" "UnuQuantize" 740 330]

   # Create a Teem->UnuAtoM->UnuJhisto Module
   set m4 [addModuleAtPosition "Teem" "UnuAtoM" "UnuJhisto" 758 19]

   # Create a Teem->UnuAtoM->Unu2op Module
   set m5 [addModuleAtPosition "Teem" "UnuAtoM" "Unu2op" 740 81]

   # Create a Teem->UnuAtoM->Unu1op Module
   set m6 [addModuleAtPosition "Teem" "UnuAtoM" "Unu1op" 740 142]

   # Create the Connections between Modules
   set c1 [addConnection $m6 0 $m1 0]
   set c2 [addConnection $m5 0 $m6 0]
   set c3 [addConnection $m2 0 $m3 0]
   set c4 [addConnection $m1 0 $m2 0]
   set c5 [addConnection $m3 0 Subnet 0]
   set c6 [addConnection Subnet 0 $m4 1]
   set c7 [addConnection $m4 0 $m5 1]
   set c8 [addConnection Subnet 1 $m4 2]

   # Set GUI variables for the Teem->UnuAtoM->UnuHeq Module
   set $m1-bins {3000}
   set $m1-sbins {1}

   # Set GUI variables for the Teem->UnuAtoM->UnuGamma Module
   set $m2-gamma {0.5}

   # Set GUI variables for the Teem->UnuNtoZ->UnuQuantize Module
   set $m3-minf {0.0}
   set $m3-maxf {8.70234}
   set $m3-realmin {0.0}
   set $m3-realmax {14.6165151596}
   set $m3-nbits {8}

   # Set GUI variables for the Teem->UnuAtoM->UnuJhisto Module
   set $m4-bins {512 256}
   set $m4-mins {nan nan}
   set $m4-maxs {nan nan}
   set $m4-type {nrrdTypeFloat}

   # Set GUI variables for the Teem->UnuAtoM->Unu2op Module
   set $m5-operator {+}

   # Set GUI variables for the Teem->UnuAtoM->Unu1op Module
   set $m6-operator {log}
}

addSubnetToDatabase {
   set name {NrrdGradient}
   set bbox {4 25 181 275}
   set creationDate {Thu Mar 17 2005}
   set creationTime {12:50:40}
   set runDate {}
   set runTime {}
   set notes {}

   # Create a Teem->Converters->NrrdToField Module
   set m1 [addModuleAtPosition "Teem" "Converters" "NrrdToField" 10 25]
   set Notes($m1) {GM_F}
   set Notes($m1-Position) {none}
   set Notes($m1-Color) {white}

   # Create a SCIRun->FieldsData->NodeGradient Module
   set m2 [addModuleAtPosition "SCIRun" "FieldsData" "NodeGradient" 4 135]

   # Create a Teem->Converters->FieldToNrrd Module
   set m3 [addModuleAtPosition "Teem" "Converters" "FieldToNrrd" 16 218]

   # Create the Connections between Modules
   set c1 [addConnection $m2 0 $m3 0]
   set c2 [addConnection $m3 2 Subnet 0]
   set c3 [addConnection $m1 0 $m2 0]
   set c4 [addConnection Subnet 0 $m1 2]

   # Set GUI variables for the Teem->Converters->NrrdToField Module
   set $m1-datasets {{Points : (none)} {Connections : (none)} {Data : Unknown} {Original Field : (none)} }
}


set name {Main}
set bbox {0 2 983 744}
set creationDate {Thu Mar 17 2005}
set creationTime {12:50:38}
set runDate {Thu Mar 17 2005}
set runTime {12:50:53}
set notes {}

# Create a Teem->DataIO->NrrdReader Module
set m1 [addModuleAtPosition "Teem" "DataIO" "NrrdReader" 2 2]
set Notes($m1) {Input Scalar Nrrd Volume
}
set Notes($m1-Position) {e}
set Notes($m1-Color) {white}

# Create a Teem->UnuNtoZ->UnuQuantize Module
set m2 [addModuleAtPosition "Teem" "UnuNtoZ" "UnuQuantize" 271 183]
set Notes($m2) {Quantize to UChar
(min->0, max->255)}
set Notes($m2-Position) {n}
set Notes($m2-Color) {white}

# Create a Teem->UnuNtoZ->UnuQuantize Module
set m3 [addModuleAtPosition "Teem" "UnuNtoZ" "UnuQuantize" 221 449]
set Notes($m3) {GM_UC}
set Notes($m3-Position) {none}
set Notes($m3-Color) {white}

# Create a Teem->UnuAtoM->UnuJoin Module
set m4 [addModuleAtPosition "Teem" "UnuAtoM" "UnuJoin" 253 374]
set Notes($m4) {NV_UC}
set Notes($m4-Position) {none}
set Notes($m4-Color) {white}

# Create a Teem->UnuNtoZ->UnuQuantize Module
set m5 [addModuleAtPosition "Teem" "UnuNtoZ" "UnuQuantize" 306 285]
set Notes($m5) {N_UC}
set Notes($m5-Position) {none}
set Notes($m5-Color) {white}

# Create an instance of a TransferFuncHisto Sub-Network
set m6 [instanceSubnet "TransferFuncHisto" 0 406]

# Create a SCIRun->Visualization->NrrdTextureBuilder Module
set m7 [addModuleAtPosition "SCIRun" "Visualization" "NrrdTextureBuilder" 237 545]

# Create a Teem->UnuNtoZ->UnuProject Module
set m8 [addModuleAtPosition "Teem" "UnuNtoZ" "UnuProject" 60 288]
set Notes($m8) {Gradient Magnitude}
set Notes($m8-Position) {n}
set Notes($m8-Color) {white}

# Create a SCIRun->Visualization->EditColorMap2D Module
set m9 [addModuleAtPosition "SCIRun" "Visualization" "EditColorMap2D" 4 487]

# Create a SCIRun->Visualization->VolumeVisualizer Module
set m10 [addModuleAtPosition "SCIRun" "Visualization" "VolumeVisualizer" 172 623]

# Create a SCIRun->Render->Viewer Module
set m11 [addModuleAtPosition "SCIRun" "Render" "Viewer" 568 700]

# Create an instance of a NrrdGradient Sub-Network
set m12 [instanceSubnet "NrrdGradient" 60 205]

# Create a SCIRun->DataIO->FieldReader Module
set m13 [addModuleAtPosition "SCIRun" "DataIO" "FieldReader" 384 10]

# Create a SCIRun->Visualization->ShowField Module
set m14 [addModuleAtPosition "SCIRun" "Visualization" "ShowField" 458 218]

# Create a SCIRun->FieldsGeometry->TransformField Module
set m15 [addModuleAtPosition "SCIRun" "FieldsGeometry" "TransformField" 497 126]

# Create a SCIRun->Math->LinearAlgebra Module
set m16 [addModuleAtPosition "SCIRun" "Math" "LinearAlgebra" 569 6]

# Create a SCIRun->DataIO->FieldReader Module
set m17 [addModuleAtPosition "SCIRun" "DataIO" "FieldReader" 818 24]

# Create a SCIRun->FieldsGeometry->TransformField Module
set m18 [addModuleAtPosition "SCIRun" "FieldsGeometry" "TransformField" 819 163]

# Create a VS->DataFlow->HotBox Module
set m19 [addModuleAtPosition "VS" "DataFlow" "HotBox" 624 241]

# Create a SCIRun->FieldsGeometry->TransformField Module
set m20 [addModuleAtPosition "SCIRun" "FieldsGeometry" "TransformField" 604 319]

# Create a SCIRun->Visualization->ShowField Module
set m21 [addModuleAtPosition "SCIRun" "Visualization" "ShowField" 604 394]

# Create a Teem->UnuAtoM->UnuFlip Module
set m22 [addModuleAtPosition "Teem" "UnuAtoM" "UnuFlip" 21 105]

# Create a SCIRun->Math->LinearAlgebra Module
set m23 [addModuleAtPosition "SCIRun" "Math" "LinearAlgebra" 646 85]

# Create the Connections between Modules
set c1 [addConnection $m13 0 $m15 0]
set c2 [addConnection $m17 0 $m18 0]
set c3 [addConnection $m15 0 $m14 0]
set c4 [addConnection $m18 0 $m19 0]
set c5 [addConnection $m20 0 $m21 0]
set c6 [addConnection $m16 0 $m23 0]
set c7 [addConnection $m7 0 $m10 0]
set c8 [addConnection $m10 0 $m11 0]
set c9 [addConnection $m12 0 $m8 0]
set c10 [addConnection $m12 0 $m5 0]
set c11 [addConnection $m1 0 $m22 0]
set c12 [addConnection $m22 0 $m6 0]
set c13 [addConnection $m22 0 $m12 0]
set c14 [addConnection $m22 0 $m2 0]
set c15 [addConnection $m4 0 $m7 0]
set c16 [addConnection $m8 0 $m3 0]
set c17 [addConnection $m5 0 $m4 0]
set c18 [addConnection $m19 2 $m20 0]
set c19 [addConnection $m16 0 $m15 1]
set c20 [addConnection $m16 0 $m20 1]
set c21 [addConnection $m23 0 $m18 1]
set c22 [addConnection $m14 0 $m11 1]
set c23 [addConnection $m6 0 $m9 1]
set c24 [addConnection $m8 0 $m6 1]
set c25 [addConnection $m2 0 $m4 1]
set c26 [addConnection $m3 0 $m7 1]
set c27 [addConnection $m9 0 $m10 2]
set c28 [addConnection $m21 0 $m11 2]
set c29 [addConnection $m19 1 $m11 3]

# Set GUI variables for the Teem->DataIO->NrrdReader Module
set $m1-filename "$DATADIR/$DATASET/vhmct1mm-resamp.nrrd"

# Set GUI variables for the Teem->UnuNtoZ->UnuQuantize Module
set $m2-minf {0.0}
set $m2-maxf {4095.0}
set $m2-realmin {0.0}
set $m2-realmax {3423.0}
set $m2-nbits {8}

# Set GUI variables for the Teem->UnuNtoZ->UnuQuantize Module
set $m3-minf {0.0}
set $m3-maxf {255.0}
set $m3-realmin {0.0}
set $m3-realmax {1364.48547363}
set $m3-nbits {8}

# Set GUI variables for the Teem->UnuAtoM->UnuJoin Module
set $m4-dim {4}

# Set GUI variables for the Teem->UnuNtoZ->UnuQuantize Module
set $m5-minf {0.0}
set $m5-maxf {2180.43}
set $m5-realmin {-1219.5}
set $m5-realmax {1098.0}
set $m5-nbits {8}

# Set GUI variables for the SCIRun->Visualization->NrrdTextureBuilder Module
set $m7-card_mem {128}

# Set GUI variables for the Teem->UnuNtoZ->UnuProject Module
set $m8-measure {9}

# Set GUI variables for the SCIRun->Visualization->EditColorMap2D Module
set $m9-panx {-0.294791666667}
set $m9-pany {-0.268749999998}
set $m9-scale_factor {1.5703125}
set $m9-selected_widget {2}
set $m9-num-entries {3}
set $m9-faux {1}
set $m9-name-0 {Generic}
set $m9-0-color-r {0.8}
set $m9-0-color-g {0.49}
set $m9-0-color-b {0.52}
set $m9-0-color-a {1.0}
set $m9-state-0 {r 0 0.193359 0.0546875 0.0566408 0.0898438 0.428571}
set $m9-shadeType-0 {0}
set $m9-on-0 {1}
set $m9-name-1 {Generic}
set $m9-1-color-r {0.43}
set $m9-1-color-g {0.39}
set $m9-1-color-b {0.38}
set $m9-1-color-a {0.839999973774}
set $m9-state-1 {r 0 0.0566406 0.226562 0.214844 0.0859375 0.495575}
set $m9-shadeType-1 {1936028769}
set $m9-on-1 {1}
set $m9-name-2 {Generic}
set $m9-2-color-r {1.0}
set $m9-2-color-g {1.0}
set $m9-2-color-b {1.0}
set $m9-2-color-a {0.920000016689}
set $m9-state-2 {r 0 0.316406 0.0117188 0.207032 0.386719 0.226417}
set $m9-shadeType-2 {1936028769}
set $m9-on-2 {1}
set $m9-marker {end}

# Set GUI variables for the SCIRun->Visualization->VolumeVisualizer Module
set $m10-sw_raster {1}
set $m10-alpha_scale {-0.554}
set $m10-shading {1}
set $m10-ambient {0.5}
set $m10-diffuse {0.5}
set $m10-specular {0.388}
set $m10-shine {24}

$m11 addViewer
set $m11-ViewWindow_0-geometry 654x918+848+20

# Set GUI variables for the SCIRun->Render->Viewer Module
set $m11-ViewWindow_0-view-eyep-x {1058.48274111}
set $m11-ViewWindow_0-view-eyep-y {-71.3732860054}
set $m11-ViewWindow_0-view-eyep-z {0.315907225902}
set $m11-ViewWindow_0-view-lookat-x {63.5}
set $m11-ViewWindow_0-view-lookat-y {63.5}
set $m11-ViewWindow_0-view-lookat-z {155.0}
set $m11-ViewWindow_0-view-up-x {-0.17326675924}
set $m11-ViewWindow_0-view-up-y {-0.164558548027}
set $m11-ViewWindow_0-view-up-z {-0.971029924572}
set $m11-ViewWindow_0-view-fov {20.0}
set $m11-ViewWindow_0-sr {1}
set $m11-ViewWindow_0-do_stereo {0}
set $m11-ViewWindow_0-ortho-view {0}
set $m11-ViewWindow_0-trackViewWindow0 {1}
set $m11-ViewWindow_0-raxes {1}
set $m11-ViewWindow_0-ambient-scale {1.0}
set $m11-ViewWindow_0-diffuse-scale {1.0}
set $m11-ViewWindow_0-specular-scale {0.4}
set $m11-ViewWindow_0-emission-scale {1.0}
set $m11-ViewWindow_0-shininess-scale {1.0}
set $m11-ViewWindow_0-polygon-offset-factor {1.0}
set $m11-ViewWindow_0-polygon-offset-units {0.0}
set $m11-ViewWindow_0-point-size {1.0}
set $m11-ViewWindow_0-line-width {1.0}
set $m11-ViewWindow_0-sbase {0.4}
set $m11-ViewWindow_0-bgcolor-r {0.0}
set $m11-ViewWindow_0-bgcolor-g {0.0}
set $m11-ViewWindow_0-bgcolor-b {0.0}
set $m11-ViewWindow_0-fogusebg {1}
set $m11-ViewWindow_0-fogcolor-r {0.0}
set $m11-ViewWindow_0-fogcolor-g {0.0}
set $m11-ViewWindow_0-fogcolor-b {1.0}
set $m11-ViewWindow_0-fog-start {0.0}
set $m11-ViewWindow_0-fog-end {0.714265}
set $m11-ViewWindow_0-fog-visibleonly {1}
set $m11-ViewWindow_0-total_frames {54}
set $m11-ViewWindow_0-currentvisual {0}
set $m11-ViewWindow_0-caxes {0}
set $m11-ViewWindow_0-pos {y1_z0}
set $m11-ViewWindow_0-global-light0 {1}
set $m11-ViewWindow_0-global-light1 {0}
set $m11-ViewWindow_0-global-light2 {0}
set $m11-ViewWindow_0-global-light3 {0}
set $m11-ViewWindow_0-lightColors {{1.0 1.0 1.0} {1.0 1.0 1.0} {1.0 1.0 1.0} {1.0 1.0 1.0}}
set $m11-ViewWindow_0-lightVectors {{ 0 0 1 } { 0 0 1 } { 0 0 1 } { 0 0 1 }}
set $m11-ViewWindow_0-global-light {1}
set $m11-ViewWindow_0-global-fog {0}
set $m11-ViewWindow_0-global-debug {0}
set $m11-ViewWindow_0-global-clip {1}
set $m11-ViewWindow_0-global-cull {0}
set $m11-ViewWindow_0-global-dl {0}
set $m11-ViewWindow_0-global-type {Gouraud}
set "$m11-ViewWindow_0-Transparent Faces (2)" {1}
set "$m11-ViewWindow_0-VolumeRenderer Transparent (1)" {1}

# Set GUI variables for the SCIRun->DataIO->FieldReader Module
set $m13-filename "$DATADIR/$DATASET/just-heart-decimated/just-heart.fld"
set $m13-filetype {SCIRun Field File (*.fld)}

# Set GUI variables for the SCIRun->Visualization->ShowField Module
set $m14-nodes-on {0}
set $m14-nodes-transparency {1}
set $m14-edges-on {0}
set $m14-edges-transparency {1}
set $m14-use-normals {1}
set $m14-use-transparency {1}
set $m14-faces-usedefcolor {1}
set $m14-has_scalar_data {1}
set $m14-def-color-r {0.76}
set $m14-def-color-g {0.31}
set $m14-def-color-b {0.31}
set $m14-def-color-a {0.82}
set $m14-active_tab {Faces}
set $m14-scalars_scale {0.3}

# Set GUI variables for the SCIRun->Math->LinearAlgebra Module
set $m16-function {DenseMatrix *m = scinew DenseMatrix(4, 4);
//row 0
m->put(0, 0, 0.228154);
m->put(0, 1, 0.00106993);
m->put(0, 2, -0.000836171);
m->put(0, 3, -18.8065);

//row 1
m->put(1, 0, 0.000875572);
m->put(1, 1, 0.216345);
m->put(1, 2, -0.000572445);
m->put(1, 3, 19.835);

//row 2
m->put(2, 0, 0.00244246);
m->put(2, 1, 0.00435502);
m->put(2, 2, 0.244361);
m->put(2, 3, -250.664);

//row 3
m->put(3, 0, 0.0);
m->put(3, 1, 0.0);
m->put(3, 2, 0.0);
m->put(3, 3, 1.0);

o1 = m;






}

# Set GUI variables for the SCIRun->DataIO->FieldReader Module
set $m17-filename "$DATADIR/$DATASET/segmented-labels.lvs.fld"
set $m17-filetype {SCIRun Field File (*.fld)}

# Set GUI variables for the VS->DataFlow->HotBox Module
set $m19-gui_label(1) {Pericardium}
set $m19-gui_label(2) {Right ventricle}
set $m19-gui_label(3) {Myocardial zone 3}
set $m19-gui_label(4) {Myocardial zone 2}
set $m19-gui_label(5) {Myocardial zone 8}
set $m19-gui_label(6) {Lateral papillary muscle of left ventricle}
set $m19-gui_label(7) {Myocardial zone 7}
set $m19-gui_label(8) {Myocardial zone 9}
set $m19-gui_label(9) {Myocardial zone 13}
set $m19-gui_name {::VS_DataFlow_HotBox_0}
set $m19-gui_parlist_name {::VS_DataFlow_HotBox_0-gui_parent_list}
set $m19-gui_siblist_name {::VS_DataFlow_HotBox_0-gui_sibling_list}
set $m19-gui_childlist_name {::VS_DataFlow_HotBox_0-gui_child_list}
set $m19-datasource {1}
set $m19-selectionsource {fromProbe}
set $m19-anatomydatasource $DATADIR/$DATASET/FMAAtlas/MasterAnatomyFMA.csv
set $m19-adjacencydatasource $DATADIR/$DATASET/FMAAtlas/AdjacencyMappingFMA.csv
set $m19-boundingboxdatasource $DATADIR/$DATASET/FMAAtlas/AnatomyBoundingBoxesFMA.csv
set $m19-oqafmadatasource {http://fme.biostr.washington.edu:8082/OQAFMA_Service/services/ServiceInterface}
set $m19-geometrypath $DATADIR/$DATASET/Decimated
set $m19-hipvarpath {}
set $m19-currentselection {unknown}
set $m19-gui_probeLocx {0.0}
set $m19-gui_probeLocy {0.0}
set $m19-gui_probeLocz {0.0}
set $m19-gui_probe_scale {2.0}

# Open the VS->DataFlow->HotBox UI
$m19 initialize_ui

# Set GUI variables for the SCIRun->Visualization->ShowField Module
set $m21-has_scalar_data {1}
set $m21-def-color-r {0.92}
set $m21-def-color-g {1.0}
set $m21-def-color-b {0.13}
set $m21-def-color-a {0.79}
set $m21-node_scale {0.03}
set $m21-edge_scale {0.015}
set $m21-scalars_scale {0.3}

# Open the SCIRun->Visualization->ShowField UI
$m21 initialize_ui

# Set GUI variables for the Teem->UnuAtoM->UnuFlip Module
set $m22-axis {1}

# Set GUI variables for the SCIRun->Math->LinearAlgebra Module
set $m23-function {DenseMatrix *ms = scinew DenseMatrix(4, 4);
//row 0
//double sx = (302. / 1830. * 2) / .33 * 2.;
double sx = 2.0;
ms->put(0, 0, sx);
ms->put(0, 1, 0.0);
ms->put(0, 2, 0.0);
ms->put(0, 3, 0.0);

//row 1
ms->put(1, 0, 0.0);
//double sy = 180. / 1089. * 2. / .33 * 2.;
double sy = 2.0;
ms->put(1, 1, sy);
ms->put(1, 2, 0.0);
ms->put(1, 3, 0.0);

//row 2
ms->put(2, 0, 0.0);
ms->put(2, 1, 0.0);
ms->put(2, 2, 2.0);
ms->put(2, 3, 0.0);

//row 3
ms->put(3, 0, 0.0);
ms->put(3, 1, 0.0);
ms->put(3, 2, 0.0);
ms->put(3, 3, 1.0);

DenseMatrix *mt = scinew DenseMatrix(4, 4);
//row 0
mt->put(0, 0, 1.0);
mt->put(0, 1, 0.0);
mt->put(0, 2, 0.0);
mt->put(0, 3, 179.0 / 3.0);

//row 1
mt->put(1, 0, 0.0);
mt->put(1, 1, 1.0);
mt->put(1, 2, 0.0);
mt->put(1, 3, 126.0 / 3.0);

//row 2
mt->put(2, 0, 0.0);
mt->put(2, 1, 0.0);
mt->put(2, 2, 1.0);
mt->put(2, 3, 1253.0);

//row 3
mt->put(3, 0, 0.0);
mt->put(3, 1, 0.0);
mt->put(3, 2, 0.0);
mt->put(3, 3, 1.0);

DenseMatrix *m = scinew DenseMatrix(4, 4);
Mult(*m, *mt, *ms);

o1 = i1 * m;

DenseMatrix *mi = scinew DenseMatrix(*m);
mi->invert();
o2 = mi;












}

# Open the SCIRun->Math->LinearAlgebra UI
$m23 initialize_ui


::netedit scheduleok
