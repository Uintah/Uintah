<!--
  The contents of this file are subject to the University of Utah Public
  License (the "License"); you may not use this file except in compliance
  with the License.
  
  Software distributed under the License is distributed on an "AS IS"
  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  License for the specific language governing rights and limitations under
  the License.
  
  The Original Source Code is SCIRun, released March 12, 2001.
  
  The Original Source Code was developed by the University of Utah.
  Portions created by UNIVERSITY are Copyright (C) 2001, 1994 
  University of Utah. All Rights Reserved.
-->

<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta name="Author" content="Martin Cole">
<meta name="Description" content="adding sgml and xml modes to emacs">
<link rel=stylesheet type="text/css" href="http://www.sci.utah.edu/scirun_docs/doc/doc_styles.css">
<title>XML mode in emacs</title>
</head>
<body>
<a href="http://www.sci.utah.edu"><img style="margin-left:-2em" src="/images/SCI_logo.gif" border="0" hspace="10" height="66" width="150"></a>
<p class="title">XML and SGML mode in emacs</p>

<ol class="toc">
<li> <a href="#autoload">Autoloading xml-mode</a>
<li> <a href="#colors">Syntax highlighting</a>
<li> <a href="#tips">Additional docs and tips.</a>   
</ol>

<p class="head"><a name="autoload">Autoloading xml-mode</a></p>
<p class="firstpara">This package is installed under /usr/local/contrib/mcole/psgml. psgml provides editing modes for sgml and xml. It requires a .dtd file to be useful. The following has been tested with the 20.4 version of emacs. Add to your .emacs file:</p>
<pre class="example">
(setq auto-mode-alist
   (append '(("\\.C$"  . c++-mode)
             ("\\.cc$" . c++-mode)
             ("\\.cxx$"  . c++-mode)
             ("\\.hxx$"  . c++-mode)
	     ("\\.java$"  . java-mode)
	     ("\\.py$"  . python-mode)
	     ("\\.cgi$"  . python-mode)
             ("\\.m$"  . objc-mode)
             ("\\.xml$"  . xml-mode)
	     ("\\.html$"  . html-helper-mode)
            ) auto-mode-alist))

(setq load-path (cons "/usr/local/contrib/mcole/psgml" load-path))
(autoload 'sgml-mode "psgml" "Major mode to edit SGML files." t)
(autoload 'xml-mode "psgml" "Major mode to edit XML files." t)
</pre>

<p class="head"><a name="colors">Autoloading xml-mode</a></p>
<p class="firstpara">If you like to use syntax highlighting then you may want to drop this code into your .emacs file. (you may want to change the colors)</p>
<pre class="example">
(set-face-foreground 'sgml-comment-face "#337777")
(set-face-foreground 'sgml-start-tag-face "MediumSeaGreen")
(set-face-foreground 'sgml-end-tag-face "SeaGreen")
(set-face-foreground 'sgml-entity-face "Red")
(set-face-foreground 'sgml-doctype-face "White")

(setq sgml-set-face t)  ; without this, all SGML text is in same color
(setq sgml-markup-faces
      '((comment   . sgml-comment-face)
	(start-tag . sgml-start-tag-face)
	(end-tag   . sgml-end-tag-face)
	(doctype   . sgml-doctype-face)
	(entity    . sgml-entity-face)))
</pre>

<p class="head"><a name="tips">Additional docs and tips.</a></p>
<p class="firstpara"><a href="http://www.lysator.liu.se/projects/about_psgml.html">Original information and documentation</a> for this mode. Once you successfully get emacs into xml-mode, you need to make emacs parse the dtd. Make sure that your path to the .dtd file is valid. Emacs will have a DTD menu, select parse DTD from the menu, then place your cursor at the end of the file, and your syntax highlighting will show up.</p>
</body>
</html>
