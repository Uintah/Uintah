<?xml version="1.0" encoding="iso-8859-1" ?>

<!--% require("../../Utilities/Publish/srdoc.rb") %-->
<!--% doc = Doc.create(Doc::DocBook) %-->

<!--
   For more information, please see: http://software.sci.utah.edu

   The MIT License

   Copyright (c) 2004 Scientific Computing and Imaging Institute,
   University of Utah.

   License for the specific language governing rights and limitations under
   Permission is hereby granted, free of charge, to any person obtaining a
   copy of this software and associated documentation files (the "Software"),
   to deal in the Software without restriction, including without limitation
   the rights to use, copy, modify, merge, publish, distribute, sublicense,
   and/or sell copies of the Software, and to permit persons to whom the
   Software is furnished to do so, subject to the following conditions:

   The above copyright notice and this permission notice shall be included
   in all copies or substantial portions of the Software.

   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
   THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
   FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
   DEALINGS IN THE SOFTWARE.
-->


<!--% doc.insertDocType("article", {"sr"=>"SCIRun"}) %-->

<article class="faq">
  <title>Installation FAQ (for SCIRun v. <!--%= doc.edition %-->)</title>

  <qandaset defaultlabel="number">


    <qandaentry>
      <revhistory>
	<revision>
	  <revnumber>001</revnumber>
	  <date>03/17/05</date>
	</revision>
      </revhistory>
      <question>
	<para>
	  I'm building ITK on Mac OSX and the compilation fails with
	  errors like the following:
	  <literallayout class="monospaced">
ld: Undefined symbols:
std::basic_ostream&lt;char, std::char_traits&lt;char> >&amp; operator&lt;&lt; 
&lt;double>(std::basic_ostream&lt;char, std::char_traits&lt;char> >&amp;, 
vnl_matrix&lt;double> const&amp;)
	  </literallayout>
	  I'm using gcc 3.3. What's wrong?
	</para>
      </question>
      <answer>
	<para>
	  The initial version of gcc 3.3 distributed with Xcode 1.5 is
	  buggy. Be sure the command <command>gcc -v</command> yields
	  build number 1671.  If the build number is 1666 then gcc
	  must be updated with Apple's
	  <filename>November2004GCCUpdater</filename> package,
	  available from <ulink
	  url="http://developer.apple.com/">Apple's Developer
	  Connection page</ulink>.
	</para>
      </answer>
    </qandaentry>

    <qandaentry>
      <revhistory>
	<revision>
	  <revnumber>001</revnumber>
	  <date>01/26/05</date>
	</revision>
      </revhistory>
      <question>
	<para>Is SCIRun compatible with GCC 3.4?</para>
      </question>
      <answer>
	<para>
	  Yes.  Note, however, that when building ITK, for use with
	  SCIRun's ITK package, ITK version 1.10 must be used because
	  earlier versions are not compatible with GCC 3.4.
	</para>
      </answer>
    </qandaentry>

    <qandaentry>
      <revhistory>
	<revision>
	  <revnumber>002</revnumber>
	  <date>01/26/05</date>
	</revision>
      </revhistory>
      <question>
	<para>I am installing SCIRun on Mac OS X.  What special procedures
	should I follow?
	</para>
      </question>
      <answer>
	<para>
	  SCIRun is fully supported on Mac OS X. Refer to SCIRun's
	  <ulink url="(%=
	  doc.treeUrl(%Q{doc/Installation/Guide/osx/index.html})
	  %)">OSX specific installation guide</ulink> for
	  instructions.
	</para>
      </answer>
    </qandaentry>

    <qandaentry>
      <revhistory>
	<revision>
	  <revnumber>1.0</revnumber>
	  <date>7/29/01</date>
	</revision>
      </revhistory>
      <question>
	<para>
	  How does one install the thirdparty software on an SGI
	  Octane.  When running the install script provided in the tar
	  ball from the SCIRun website, the following error message
	  appears.  It seems to be trying to copy a xerces file that
	  does not exist.
	</para>

	<literallayout class="monospaced">
cc-32bit/src/xerces-c-src1_5_2/src/validators/schema'
gmake[1]: Leaving directory
`/u/wk/ccheung/scirun/SCIRun_Thirdparty/1.4.2/IRIX/gcc-32bit/src/
xerces-c-src1_5_2/src/validators'

cd
/u/wk/ccheung/scirun/SCIRun_Thirdparty/1.4.2/IRIX/gcc-32bit/src/
xerces-c-src1_5_2/obj
&amp;&amp; /usr/local/bin/gmake install &amp;&amp; cd ..
gmake[1]: Entering directory
`/u/wk/ccheung/scirun/SCIRun_Thirdparty/1.4.2/IRIX/gcc-32bit/src/
xerces-c-src1_5_2/obj'

mkdir -p /u/wk/ccheung/scirun/SCIRun_Thirdparty/1.4.2/IRIX/gcc-32bit/lib

cp -fp
/u/wk/ccheung/scirun/SCIRun_Thirdparty/1.4.2/IRIX/gcc-32bit/src/
xerces-c-src1_5_2/lib/libxerces-c1_5_2.so
/u/wk/ccheung/scirun/SCIRun_Thirdparty/1.4.2/IRIX/gcc-32bit/lib
/u/wk/ccheung/scirun/SCIRun_Thirdparty/1.4.2/IRIX/gcc-32bit/src/
xerces-c-src1_5_2/lib/libxerces-c1_5_2.so
- No such file or directory
gmake[1]: [install] Error 2 (ignored)
gmake[1]: Leaving directory
`/u/wk/ccheung/scirun/SCIRun_Thirdparty/1.4.2/IRIX/gcc-32bit/src/
xerces-c-src1_5_2/obj'

-------------------------------------------------------
-- FATAL ERROR :
--
-- The build or installation of the required software:
--
--   Xerces-C++
--
-- failed.  Check the above output
-- for errors and clues as to how to solve the problem.

-------------------------------------------------------
	</literallayout>
      </question>

      <answer>
	<para>
	  Xerces creates long commands for a shell.  Perhaps the
	  value of the system's 'ncargs' variable is too small.
	</para>

	<para>
	  Run the command 'systune ncargs'.  It will report ncargs' value. Use
	  the systune command to set ncargs to a large value: systune ncargs
	  262144.  Root privilages are needed to do this.  Try the thirdparty
	  install again.
	</para>

      </answer>
    </qandaentry>

    <qandaentry>  
      <revhistory>
	<revision>
	  <revnumber>1.0</revnumber>
	  <date>7/29/01</date>
	</revision>
      </revhistory>
      <question> 
	<para>
	  SCIRun and its required thirdparty software is successfully
	  installed (by hand) onto an SGI target install machine, but
	  SCIRun is runs, it immediately signals an abort (SIGABRT).
	</para>

	<para> 
	  The output of SCIRun after it signals the abort looks like this: 
	  <literallayout class="monospaced">
Thread "main"(pid 251775) caught signal SIGABRT (Abort)
Backtrace:
0x5ff69224: SCIRun::Thread::niceAbort(void)
0x5ff7106c: handle_abort_signals
0xc37f7c0: sig_fixup_mask
0xfb11100: prctl
0xc37ee00: pthread_kill
0xc37fef8: _SGIPT_libc_raise
0xc378068: ptctl
0xfaf3e20: raise
0xfa668a4: abort
0xae40958: terminate(void)
0xae40788: __call_terminate
0xae42ba8: __throw
0x5ff72ad0: SCIRun::Thread::os_start(bool)
0x5ff68c7c: SCIRun::Thread::Thread(SCIRun::Runnable*,const
char*,SCIRun::ThreadGroup*,SCIRun::Thread::ActiveState)
0x100057c4: main
251775: main (state=running)

Abort signalled by pid: 251775
Occured for thread:
"main"resume(r)/dbx(d)/cvd(c)/kill thread(k)/exit(e)?
	  </literallayout>
	</para>
      </question>

      <answer>
	<para>
	  One or more of the thirdparty libraries is configured and built to
	  use (i.e. link against) pthreads.  On SGI machines, SCIRun uses sproc
	  threads instead of pthreads.  It is illegal to use both sproc and 
	  pthreads in a single process.  When two binaries are linked together
	  into a single process at runtime (e.g. scirun and libxerces-c1_4.so),
	  an abort is signalled and the process is shutdown.
	</para>

	<para>
	  The solution is to rebuild the offending libraries, configuring them
	  to _not_ use threads.  Xerces is typically the offending library,
	  although Tcl and others may also be incorrectly configured to use
	  threads.  See the <ulink
	  url="(% doc.treeUrl(%Q{doc/Installation/Guide/sec.source_inst.html}) %)">Installation Guide</ulink> for recommended configure
	  arguments for thirdparty software.  Note that when the automatic
	  install script is used, all software is automatically configured
	  and built correctly.
	</para>
      </answer>
    </qandaentry>

    <qandaentry>
      <revhistory>
	<revision>
	  <revnumber>1.0</revnumber>
	  <date>7/29/01</date>
	</revision>
      </revhistory>
      <question>
	<para>
	  When building SCIRun on an SGI target machine, an error
	  message regarding the SGI Image Format Library (IFL) appeared.
	</para>
	<para>
	  The error text looks similar to this:
	  <literallayout class="monospaced">
	    ld64: FATAL   9  : I/O error (-lifl): No such file or directory
	  </literallayout>
	</para>
      </question>

      <answer>
	<para>
	  The problem is a bug within the SCIRun build system that requires
	  the SGI Image Format Library (IFL) in order to make SCIRun.  The long
	  term solution is to make the IFL optional instead of required.
	</para>
	<para>
	  For now, work around the problem by having the
	  system administrator install the IFL onto the target install machine.
	  Be sure to install the type (32 or 64 bit) needed for SCIRun
	  configuration(s).
	</para>
      </answer>

    </qandaentry>

    <qandaentry>
      <revhistory>
	<revision>
	  <revnumber>1.0</revnumber>
	  <date>7/29/01</date>
	</revision>
      </revhistory>
      <question>
	<para>
	  The thirdparty software was successfully installed onto an SGI
	  target install machine, but when tring to build SCIRun, it fails
	  during the compile phase.
	</para>
	<para>
	  The error message displayed contains the following warning:
	  <literallayout class="monospaced">
Warning: Option 'std' not in group 'LANG' (LANG:std)
	  </literallayout>
	</para>

      </question>

      <answer>
	<para>
	  The MIPSpro compiler on the target install machine is old.
	  SCIRun requires version 7.3.1.1m at a minimum.
	</para>
      </answer>

    </qandaentry>

    <qandaentry>
      <revhistory>
	<revision>
	  <revnumber>1.0</revnumber>
	  <date>7/29/01</date>
	</revision>
      </revhistory>
      <question>
	<para>
	  SCIRun sometimes hangs when running the example nets on a dual
	  processor linux machine.
	</para>
      </question>

      <answer>
	<para>
	  This is a known bug with no known solution.  There is,
	  however, a workaround:
	</para>
	<para>
	  Re-configure SCIRun adding the
	  <option>--disable-sci-malloc</option> option to the
	  configure command, then rebuild SCIRun.  If SCIRun still
	  hangs while running example nets, change directories to
	  on-the-fly-libs and issue a make command by hand.  Run the
	  example again once the make of the on-the-fly-libs finishes.
	</para>
      </answer>

    </qandaentry>

    <qandaentry>
      <revhistory>
	<revision>
	  <revnumber>1.0</revnumber>
	  <date>7/29/01</date>
	</revision>
      </revhistory>
      <question>
	<para>
	  Installing SCIRun or the thirdparty software into 
	  my home directory fails when building.
	</para>
      </question>
      <answer>
	<para>
	  When installing any of the software into your home directory be sure
	  to use complete and absolute paths when providing configure argumenst.
	  <emphasis>Do not</emphasis> use tilde expansion or any other short
	  cuts. They will not properly expand by the install scripts and
	  makefiles.
	</para>
	<para>
	  For example, instead of configuring with
	  <option>--prefix=~bob</option>, configure with
	  <option>--prefix=/home/bob</option>.
	</para>
      </answer>
    </qandaentry>

    <qandaentry>
      <revhistory>
	<revision>
	  <revnumber>1.0</revnumber>
	  <date>7/29/01</date>
	</revision>
      </revhistory>
      <question>
	<para>
	  How does one make a 64 bit build of SCIRun?
	</para>
      </question>

      <answer>
	<para>
	  64 bit is only available on the SGI platform.  To
	  build a 64 bit version of SCIRun, 64
	  bit versions of the thirdparty software are needed.  Use the SCI thirdparty install script using the 64
	  option.  If building by hand, see advice below.
	</para>
	<para>
	  Once the thirdparty software is available in 64 bits, 
	  configure
	  SCIRun with the <option>--enable-64bit</option> option and rebuild.
	</para>
	<para>
	  Unfortunately, most of the required third party software do not take
	  64 bit SGI platforms into account when writing configure scripts and
	  makefiles. However, it is possible to build all 
	  software in 64 bit. In general, to get 64 bit versions of the third
	  party software, it is necessary to edit Makefiles so that 
	  <varname>CFLAGS</varname> and <varname>LFLAGS</varname> macros have
	  <quote>-64</quote> listed instead of <quote>-n32</quote>. In the case
	  of tcl distributions, edit makefiles (after
	  configuring) by hand and replace all instances of
	  <quote>-n32</quote> with <quote>-64</quote>. For Xerces, 
	  change the environment variables listed above, replacing all
	  instances of <quote>-n32</quote> with <quote>-64</quote> before
	configuring.  </para>
      </answer>
    </qandaentry>

    <qandaentry>
      <question>  
	<para>
	  SCIRun is successfully installed onto a linux target install
	  machine with XFree86 version 4.1.0 installed, but when it runs,
	  it immediately signals a segmentation violation (SIGSEGV):
	  <literallayout class="monospaced">
	    Thread "main"(pid 2063) caught signal SIGSEGV at address 0xdccc10 
	    (segmentation violation)
	    0: main (state=running)
	    1026: TCL main event loop (detached, state=blocking on semaphore, 
	    TCLTask startup continue semaphore)
	    2051: Scheduler (daemon, detached, state=blocking, NetworkEditor 
	    request FIFO,
	    Mailbox empty condition)
	    
	    Abort signalled by pid: 2063
	    Occured for thread:
	    "main"resume(r)/dbx(d)/cvd(c)/kill thread(k)/exit(e)?
	  </literallayout>
	</para>  
      </question>

      <answer>
	<para>
	  The XFree86 version 4.1.0 binary distributions for linux ship with a
	  version of GLU (libGLU.so.1.3) conflicts with the xerces
	  library. Replace the GLU library with a different
	  version (e.g. libMesaGLU.so, or some other GLU already on the
	  machine).
	</para>
      </answer>

    </qandaentry>

    <qandaentry>
      <revhistory>
	<revision>
	  <revnumber>1.20</revnumber>
	  <date>2/09/04</date>
	</revision>
      </revhistory>
      <question>
	<para> SCIRun configure fails with an error about not finding the
	mdsplus library.  What is this all about?
	</para>
      </question>

      <answer>
	<para>
	  You don't have the mdsplus libraries installed on your
	  machine.  You need them if you plan to use the Fusion
	  package.  However, if you do not want to, or do not think
	  that you are using Fusion, then it is most likely because
	  your configure line either explicitly states to use Fusion
	  or does not explicitly list the SCIRun packages to use (and
	  thus SCIRun is trying to use all packages in your
	  SCIRun/src/Packages directory.)  To fix this, use something
	  like this: <option>--enable-package="BioPSE Teem"</option>
	  to get only the packages you want.
	</para>
      </answer>
    </qandaentry>

    <!--  THIS IS A TEMPLATE OF A FAQ ENTRY... Copy it and then edit it.
	 <qandaentry>
	 <revhistory>
	 <revision>
	 <revnumber>1.0</revnumber>
	 <date>7/29/01</date>
	 </revision>
	 </revhistory>
	 <question>
	 <para> Question
	 </para>
	 </question>

	 <answer>
	 <para>
	 Answer
	 </para>
	 </answer>
	 </qandaentry>

	 THIS IS THE END OF THE FAQ ENTRY TEMPLATE -->


  </qandaset>

</article>
