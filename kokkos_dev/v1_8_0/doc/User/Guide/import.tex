% -*-latex-*-
%
%  The contents of this file are subject to the University of Utah Public
%  License (the "License"); you may not use this file except in compliance
%  with the License.
%
%  Software distributed under the License is distributed on an "AS IS"
%  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
%  License for the specific language governing rights and limitations under
%  the License.
%
%  The Original Source Code is SCIRun, released March 12, 2001.
%
%  The Original Source Code was developed by the University of Utah.
%  Portions created by UNIVERSITY are Copyright (C) 2001, 1994
%  University of Utah. All Rights Reserved.
%

\section{Importing data into \sr{}}
\label{sec:import} 
\index{importing}

Here we describe some of the channels through which you can import data
into \sr{}.  The basic paradigm a this point requires converting existing
files into standard \sr{} files.  We will extend this very soon to support
readers within \sr{} that will accept other formats.


\subsection{CVRTI converters}

The Cardiovascular Research and Training Institute (CVRTI) has developed a
number of scalar and vector data and geometry file formats which required
converters for \sr{}.  The result is a set of stand-alone programs that read
in one more more existing CVRTI files and generate a particular form of
\sr{} file, the details of which depend on the particular combination of
nodes, connectivities, and associated attributes.

The programs and their parameters as as follows (go to the end of the list
to see the definitions of the different parameter and file types):
%
\begin{description}
  \item [CVRTItoTriSurfGrad: ] converts nodes, triangle connectivities, and
        vector (grad) files into a field with associated vector attribute:\\
        \begin{verbatim}
        CVRTItoTriSurfGrad pts fac grad [channels] fieldout
        \end{verbatim}
  \item [CVRTItoTriSurfPot: ] converts nodes, triangle connectivities, and
        scalar (pot) data files into a field with associated scalar
        attributes. 
        \begin{verbatim}
        CVRTItoTriSurfPot pts fac pot [channels] fieldout
        \end{verbatim}
  \item [CVRTItoTetVolGrad: ] converts nodes, tetrahedral connectivities, and
        vector (grad) files into a field with associated vector
        attributes:\\
        \begin{verbatim}
        CVRTItoTetVolGrad pts tetras grad [channels] fieldout
        \end{verbatim}
  \item [CVRTItoTetVolPot: ] converts nodes, tetrahedral connectivities, and
        scalar (pot) files into a field with associated scalar attributes:\\
        \begin{verbatim}
        CVRTItoTetVolPot pts tetras pot [channels] fieldout
        \end{verbatim}
\end{description}

\paragraph{Definitions:}

\begin{center}
\begin{tabular}{|c|p{4in}|} \hline
\multicolumn{1}{|c|}{Argument} &
\multicolumn{1}{|c|}{Purpose} \\ \hline
\multicolumn{2}{|l|}{Geometry} \\ \hline
pts & CVRTI points file; ASCII file with one x,y,z triplet per line.*\\
fac & CVRTI triangle connectivity (facet) file; ASCII file with one
    triangle defined per line.  Each value points to a node number in the
    associated .pts file, with 1 (not 0) as the first node number.*  \\
tetras & CVRTI tetrahedra file; ASCII file with the nodes from one
    tetrahedron on each line, pointing to the nodes in the associated .pts
    file.  Pointers begin with 1 (not 0).*\\ \hline
\multicolumn{2}{|l|}{Data} \\ \hline
grad & CVRTI vector file; ASCII file with two x,y,z triplets per line;
    first triplet is origin of the vector and second is the endpoint.*\\
pot & CVRTI scalar (potentials) data file; ASCII file,  each line contains
    one scalar value.  Without .channels file, all programs assume a
    one-to-one mapping of scalar value to the  nodes in the associated .pts
    file.*\\ \hline
\multicolumn{2}{|l|}{Channel Mapping} \\ \hline
channels & CVRTI data channel mapping file; ASCII file that begins with the
    line ``N channels'', where N is the number of channels in the file.
    Subsequent lines contain two values, the first refers to a node number in
    the geometry and the second points to the associated channel of any scalar
    or vector data files.  Thus a .channels file must have an entry for each
    node of the associated .pts file but the associated .pot file can have more
    (or even fewer) entries.\\ \hline
\multicolumn{2}{|l|}{Field File} \\ \hline
field & SCIRun fields file that contains both the geometry and associated
    scalar or vector data as attributes. \\ \hline
& *\textbf{Note}: to find the length of all CVRTI ASCII geometry,
scalar, and vector files, count the number of lines in the file. \\
\hline
\end{tabular}
\end{center}

\paragraph{Location of converter programs:}
All converter programs are normally available in the subdirectory of the
\sr{} distribution called \directory{src/StandAlone/convert}.  If they are
not easily available, ask the local person who installed \sr{} for
assistance.
