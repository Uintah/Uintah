<html>
<head>
<!--
   For more information, please see: http://software.sci.utah.edu

   The MIT License

   Copyright (c) 2004 Scientific Computing and Imaging Institute,
   University of Utah.

   License for the specific language governing rights and limitations under
   Permission is hereby granted, free of charge, to any person obtaining a
   copy of this software and associated documentation files (the "Software"),
   to deal in the Software without restriction, including without limitation
   the rights to use, copy, modify, merge, publish, distribute, sublicense,
   and/or sell copies of the Software, and to permit persons to whom the
   Software is furnished to do so, subject to the following conditions:

   The above copyright notice and this permission notice shall be included
   in all copies or substantial portions of the Software.

   THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
   THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
   FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
   DEALINGS IN THE SOFTWARE.
-->

<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
<meta name="generator" content="Adobe GoLive 4">
<title>Looking at the Data</title>
</head>

<body bgcolor="#a9a9a9">
<A name="chapter-2">
<table align="center" border="0" cellpadding="0" cellspacing="0" width="306" bgcolor="#cccccc">
<tr>
<td><img height="92" width="600" src="images/sub-banner.jpg" border="0"
    usemap="#sub-banner8662a0c4"><map name="sub-banner8662a0c4"><area
    coords="581,65,598,84" shape="rect" title nohref><area
    href="chapter_7.html" coords="557,64,575,83" shape="rect"
    title="Feedback"><area href="chapter_6.html" coords="532,64,550,82"
    shape="rect" title="Putting Simulation and Visualization
    Together"><area href="chapter_5.html" coords="508,64,527,83"
    shape="rect" title="Bioelectric Field Simulation"><area
    href="chapter_4.html" coords="483,64,502,83" shape="rect"
    title="Multi-Vis"><area href="chapter_3.html" coords="460,64,478,83"
    shape="rect" title="Derived Fields"><area href="chapter_2.html"
    coords="436,64,454,83" shape="rect" title="Looking at the Data"><area
    href="chapter_1.html" coords="412,64,430,81" shape="rect"
    title="Geometry Visualization"><area href="Intro.html"
    coords="354,64,406,84" shape="rect" title="Introduction"><area
    href="../../index.html"
    coords="205,63,343,83" shape="rect" title="Documentation"><area
    href="http://software.sci.utah.edu/" coords="103,63,195,82"
    shape="rect" title="Software"><area href="index.html"
    coords="1,65,92,81" shape="rect" title="Tutorial Home"></map></td> 
</tr>

<tr><td>
<center>
<table border="0" cellpadding="0" cellspacing="5" width="600">
<tr><td>

<center>
<font face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular" color="maroon">
<H1>Chapter 2: Looking at the Data</H1></font>
</center>

<H2>Chapter Sections</H2>   

<UL>
  <LI> <A href="#section-0"> Chapter Overview</A>
  <LI> <A href="#section-1"> Color Maps</A>
  <LI> <A href="#section-2"> Adding Color to Your Net</A>
  <LI> <A href="#section-3"> GenStandardColorMaps GUI</A>
  <LI> <A href="#section-4"> RescaleColorMap GUI</A>
  <LI> <A href="#summary"  > Summary</A>
</UL>

<H2><A name="section-0">Chapter Overview</A></H2>

Chapter 1 demonstrated the construction of a small network to
visualize the geometry of a mesh. Chapter 2 demonstrates how to
extend that net, adding tools to look at data values on the geometry.
Specifically, how to visualize a scalar quantity (voltage) on a set of
points in space (a PointCloud of electrodes).
<P>
In the previous net, three modules were hooked together--FieldReader,
ShowField, and Viewer. In the user interface of the ShowField module,
the Default Color selector was used to render all geometry in blue.
<P>
In this chapter, rather than mapping a single color to the geometry,
colors will vary across the mesh based on the data's scalar values.
	
<H2><A name="section-1">Color Maps</A></H2> A color map is an array of
colors that, when used to color data based on the data's value, help
the user interpret data more easily.  A color map consists of a set of
colors that evenly change in red, green, blue, and/or alpha (RGBA).
These colors are mapped to a range of data values, as specified by
the minimum and maximum data values of the data set in question.  An
infinite number of color maps can be created.  SCIRun provides a large
number of predefined color maps for convenience.  <b>Figure 2.0</b>
shows several example color maps.
<P>
<center>
<img height="200" width="450" src="images/figures/2_1.jpg"><br>
<B>Figure 2.0: Example Color maps provided by the<BR>
   GenStandardColorMaps module.</B>
</center>
<P>	

<H2><A name="section-2">Adding Color To Your Net</A></H2>
The first step in this chapter is to map the data value at each node
of the mesh to a meaningful color in order to differentiate one data
value from another.  The GenStandardColorMaps module in SCIRun
provides this mapping.
<P>
The GenStandardColorMaps module generates color maps in SCIRun. This
module contains a selection of default color maps.  For each color
map, the user controls the opacity (alpha) for each data value, then
chooses the number of discrete entries in the color map table (the
default is 256 colors).
<P>
The color map determines which values in the data are assigned to each
color.  By default, the minimum/maximum range is -1 to 1.
<P>
Using the RescaleColorMap module, set the min/max values by
hand, or auto-scale them to correspond with the min/max data
value range from a scalar field.
<P>                  
Now, add a GenStandardColorMaps and a RescaleColorMap module to the
net created in <a href="chapter_1.html#chapter1">Chapter 1</a>.

<OL>
  <LI> First, open the SCIRun environment and load
       show-torso-mesh.net located in <b>../SCIRun/src/nets</b> (as
       saved in Chapter 1).</p>

  <LI> Now, add both modules: GenStandardColorMap and RescaleColorMap,
       located under the SCIRun-&gt;Visualization menu (see <b>Figure 2.1</b>).</p>

  <LI> Connect the output from GenStandardColorMaps to the input of
       RescaleColorMap.</p>

  <LI> Connect the output from the FieldReader to the other input port
       of RescaleColorMap.</p>

  <LI> Finally, connect the output from RescaleColorMap to the input of
       ShowField.</p>
</OL> 

The network should be similar to <b>Figure 2.1</b>.
<P>
<center>
<img width="487" height="588" src="images/figures/2_2.gif"><br>
<b>Figure 2.1: Net With Color Map Modules.</b>
</center>
<P>
The RescaleColorMap, similar to the Viewer module in Chapter 1, is
an example of a module with dynamic input ports.  If the user connects
more than one field into RescaleColorMap, the min/max range for
auto-scaling corresponds to the min/max range of data values from all
input Fields.
<P>
The second input port on the ShowField module accepts a color map that
maps the data values in its input Field to a color in the input
color map, and renders accordingly.  If a color map is present in
ShowField, the module ignores the Default Color, and uses the color map
values instead. To force ShowField to use the Default Color when a color 
map is connected, select the &quot;Use Default Color&quot; checkbox 
for a specific tab.
<P>                  
To complete this net, read in a Field.  
	
<A NAME="electrodes">
<OL>
   <LI> Use the FieldReader User Interface (UI) to read in
        utahtorso-lowres-electrodes.pcd.fld (a point cloud of
        electrode positions, with voltages measured from a single
        instant in time). There may be a brief wait while several
        modules dynamically compile code.</p>

   <LI> Select the Autoview option in the ViewWindow and rotate the
        image downward.</p>

   <LI> In the ShowField UI, change the Node Scale to 6.The Node
        Display Type should already be set to Spheres.</p>

   <LI> An image similar to <b>Figure 2.2</b> should appear in the
        ViewWindow.</p>
</OL>

<center> <img width="550" height="474" src="images/figures/2_3.gif"><br>
<b>Figure 2.2: ViewWindow showing Utah Torso Electrodes.</b>
</center>

<H2><A name="section-3">GenStandardColorMaps GUI</A></H2>

    Now, explore the UIs for the GenStandardColorMaps and
    RescaleColorMap modules.  Upon pressing the UI button on the
    GenStandardColorMaps module, the user interface shown in <b>Figure
    2.3</b> will appear.
    <P>
    <center>
    <img width="315" height="473" src="images/figures/2_4.gif"><br>
    <b>Figure 2.3: UI for GenStandardColorMaps.</b>
    </center>
    <P>
    Please note the following:
        <UL>
	  <LI> A selection of standard color maps appears on the
 	       bottom half of the window.</p>

	  <LI> The selected color map appears at the top of the
	       window, and has a clickable interface for changing the
	       opacity of each color swatch in the map. The red line
	       in the middle of the color map represents the opacity
	       (alpha) of the color map.</p>

	  <LI> To add additional control points, left click on the
	       color map.  To remove additonal control points, right
	       click on a control point.<p>

	  <LI> The <I>Shift</I> slider skews the color map to the
	       left or right.</p>

	  <LI> The <I>Resolution</I> slider sets the number of
	       distinct colors to be stored in the color table.</p>

	  <LI> To generate <it>banded</it> colors, choose a low resolution.</p>

	  <LI> For smoother color transitions, choose a higher
 	       resolution (256 colors).</p>

	</UL>  

        In GenStandardColorMaps, change the color map from Inverse
	Rainbow to Inverse Darkhue. This changes the image in the
	ViewWindow from the image originally generated (<b>Figure
	2.2</b>) to the one seen in <b>Figure 2.4</b>.
        <P>
	<center>
	<img width="500" height="364" src="images/figures/2_6.gif"><br>
	<b>Figure 2.4: Image Using the Inverse Darkhue Color Map.</b>
	</center>

<H2><A name="section-4">RescaleColorMap GUI</A></H2>

        The RescaleColorMap module is used to change the way the color
        map is mapped onto data.  This allows the image to be
        easily interpreted by the user.  <b>Figure 2.5</b> shows the
        UI for the RescaleColorMap module.
        <P>
	<center>
	<img width="297" height="143" src="images/figures/2_5.gif"><br>
	<b>Figure 2.5: RescaleColorMap UI.</b>
	</center>

	<UL>
            <LI> The minimum/maximum range of the color map can be set
                 manually or automatically.</p>

            <LI> If the range is auto-scaled, it will correspond to
                 the minimum and maximum data values from all input
                 Fields connected to the module.</p>
        </UL>
                  
        Change the color map range in the RescaleColorMap UI to a
        Fixed Scale of -30 to 30 and click Execute.  <b>Figure 2.6 </b> shows the image with 
        the Fixed Scale.  Notice that by using this range,
        the electrodes appear very homogeneous.  
        <P>
	<center>
	<img width="563" height="484" src="images/figures/2_7.gif"><br>
	<b>Figure 2.6: Image Using Auto Scaled Color Map.</b>
	</center>

	<A NAME="summary">
        <H2><b>Summary</b></H2> Chapter 2 demonstrated adding
	GenStandardColorMaps and RescaleColorMap modules. These modules look
	at data values and varying colors over the geometry,
	rather than mapping data to a single color. 
        <P>
	Chapter 3 features more visualization techniques, and
	explores inputing and outputing a Field.
	<P>
	<A HREF="#chapter-2">Return to Top</A>
	</td>
	</tr>
</table>
</center>
</td>
</tr>
<tr>
<td><img height="35" width="600" src="images/sub-banner-bottom.jpg"
    border="0" usemap="#sub-banner-bottom8ac200bf"><map
    name="sub-banner-bottom8ac200bf"><area href="chapter_3.html"
    coords="564,3,588,18" shape="rect"><area href="chapter_1.html"
    coords="539,1,560,22" shape="rect"><area href="http://www.sci.utah.edu"
    coords="6,6,68,30" shape="rect" title="SCI Institute"></map></td> 
</tr>
</table>
</body>
</html>
