#
#  For more information, please see: http://software.sci.utah.edu
# 
#  The MIT License
# 
#  Copyright (c) 2004 Scientific Computing and Imaging Institute,
#  University of Utah.
# 
#  License for the specific language governing rights and limitations under
#  Permission is hereby granted, free of charge, to any person obtaining a
#  copy of this software and associated documentation files (the "Software"),
#  to deal in the Software without restriction, including without limitation
#  the rights to use, copy, modify, merge, publish, distribute, sublicense,
#  and/or sell copies of the Software, and to permit persons to whom the
#  Software is furnished to do so, subject to the following conditions:
# 
#  The above copyright notice and this permission notice shall be included
#  in all copies or substantial portions of the Software.
# 
#  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
#  OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
#  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
#  THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
#  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
#  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
#  DEALINGS IN THE SOFTWARE.
#


# SCI Network 1.0

#######################################################################
# Check environment variables.  Ask user for input if not set:
set results [sourceSettingsFile]
set DATADIR [lindex $results 0]
set DATASET [lindex $results 1]
#######################################################################

source $DATADIR/$DATASET/$DATASET.settings

::netedit dontschedule

set m0 [addModuleAtPosition "SCIRun" "DataIO" "FieldReader" 9 8]
set m1 [addModuleAtPosition "BioPSE" "Forward" "SetupFEMatrix" 27 87]
set m2 [addModuleAtPosition "BioPSE" "Forward" "ApplyFEMCurrentSource" 45 160]
set m3 [addModuleAtPosition "SCIRun" "Math" "SolveMatrix" 27 224]
set m4 [addModuleAtPosition "SCIRun" "Fields" "ManageFieldData" 9 289]
set m5 [addModuleAtPosition "BioPSE" "Visualization" "ShowDipoles" 411 81]
set m6 [addModuleAtPosition "SCIRun" "DataIO" "FieldReader" 411 10]
set m7 [addModuleAtPosition "SCIRun" "Render" "Viewer" 628 809]
set m8 [addModuleAtPosition "SCIRun" "Visualization" "GenStandardColorMaps" 391 248]
set m9 [addModuleAtPosition "SCIRun" "Visualization" "Isosurface" 373 699]
set m10 [addModuleAtPosition "SCIRun" "DataIO" "FieldReader" 445 310]
set m11 [addModuleAtPosition "SCIRun" "Fields" "DirectInterpolate" 427 374]
set m12 [addModuleAtPosition "SCIRun" "Fields" "FieldBoundary" 664 456]
set m13 [addModuleAtPosition "SCIRun" "Visualization" "ShowField" 664 521]
set m14 [addModuleAtPosition "SCIRun" "DataIO" "MatrixReader" 227 415]
set m15 [addModuleAtPosition "BioPSE" "LeadField" "BuildMisfitField" 427 512]
set m16 [addModuleAtPosition "SCIRun" "Fields" "ManageFieldData" 427 450]
set m17 [addModuleAtPosition "SCIRun" "Fields" "ManageFieldData" 409 575]
set m18 [addModuleAtPosition "SCIRun" "Visualization" "RescaleColorMap" 391 638]
set m19 [addModuleAtPosition "SCIRun" "Fields" "FieldMeasures" 221 275]
set m20 [addModuleAtPosition "SCIRun" "Fields" "ManageFieldData" 203 338]
set m21 [addModuleAtPosition "SCIRun" "Visualization" "Isosurface" 203 508]
set m22 [addModuleAtPosition "SCIRun" "Fields" "DirectInterpolate" 185 655]
set m23 [addModuleAtPosition "SCIRun" "Visualization" "ShowField" 185 723]
set m24 [addModuleAtPosition "SCIRun" "Fields" "ChangeFieldDataAt" 203 579]

addConnection $m0 0 $m1 0
addConnection $m0 0 $m2 0
addConnection $m1 0 $m3 0
addConnection $m2 0 $m3 1
addConnection $m3 0 $m4 1
addConnection $m0 0 $m4 0
addConnection $m5 0 $m2 1
addConnection $m6 0 $m5 0
addConnection $m10 0 $m11 1
addConnection $m4 0 $m11 0
addConnection $m9 1 $m7 0
addConnection $m5 1 $m7 1
addConnection $m12 0 $m13 0
addConnection $m13 0 $m7 2
addConnection $m0 0 $m12 0
addConnection $m14 0 $m15 0
addConnection $m11 0 $m16 0
addConnection $m16 1 $m15 1
addConnection $m15 0 $m17 1
addConnection $m4 0 $m17 0
addConnection $m17 0 $m9 0
addConnection $m8 0 $m18 0
addConnection $m17 0 $m18 1
addConnection $m18 0 $m9 1
addConnection $m0 0 $m19 0
addConnection $m19 0 $m20 1
addConnection $m0 0 $m20 0
addConnection $m20 0 $m21 0
addConnection $m17 0 $m22 0
addConnection $m22 0 $m23 0
addConnection $m18 0 $m23 1
addConnection $m23 0 $m7 3
addConnection $m21 0 $m24 0
addConnection $m24 0 $m22 1

set $m0-notes {}
set $m0-show_status {1}
set $m0-filename $DATADIR/$DATASET/$DATASET-mesh.tvt.fld
set $m1-notes {}
set $m1-show_status {1}
set $m1-UseCondTCL {1}
set $m1-UseBasisTCL {0}
set $m1-nprocs {auto}
set $m2-notes {}
set $m2-show_status {1}
set $m2-sourceNodeTCL {0}
set $m2-sinkNodeTCL {1}
set $m2-modeTCL {dipole}
set $m3-notes {}
set $m3-show_status {1}
set $m3-target_error {0.000001}
set $m3-flops {       1.4094e+06}
set $m3-floprate {          246.644}
set $m3-memrefs {      2.48629e+07}
set $m3-memrate {          4351.01}
set $m3-orig_error {         0.658721}
set $m3-current_error {7.46155e-07}
set $m3-method {Conjugate Gradient & Precond. (SCI)}
set $m3-precond {jacobi}
set $m3-iteration {122}
set $m3-maxiter {500}
set $m3-use_previous_soln {1}
set $m3-emit_partial {0}
set $m3-emit_iter {50}
set $m3-status {}
set $m3-np {4}
set $m4-notes {}
set $m4-show_status {1}
set $m5-notes {}
set $m5-show_status {1}
set $m5-widgetSizeGui_ {0.05}
set $m5-scaleModeGui_ {normalize}
set $m5-showLastVecGui_ {1}
set $m5-showLinesGui_ {1}
set $m6-notes {}
set $m6-show_status {1}
set $m6-filename $DATADIR/$DATASET/$DATASET-dipole.pcv.fld
set $m7-notes {}
set $m7-show_status {1}
$m7 ui
set $m7-ViewWindow_0-pos {}
set $m7-ViewWindow_0-caxes {0}
set $m7-ViewWindow_0-raxes {1}
set $m7-ViewWindow_0-iaxes {}
set $m7-ViewWindow_0-have_collab_vis {0}
set $m7-ViewWindow_0-view-eyep-x {          7.91238}
set $m7-ViewWindow_0-view-eyep-y {          -1.3698}
set $m7-ViewWindow_0-view-eyep-z {          3.91772}
set $m7-ViewWindow_0-view-lookat-x {       0.00664166}
set $m7-ViewWindow_0-view-lookat-y {       -0.0175109}
set $m7-ViewWindow_0-view-lookat-z {       -0.0268918}
set $m7-ViewWindow_0-view-up-x {         -0.43655}
set $m7-ViewWindow_0-view-up-y {        0.0652772}
set $m7-ViewWindow_0-view-up-z {         0.897309}
set $m7-ViewWindow_0-view-fov {             16.5}
set $m7-ViewWindow_0-view-eyep_offset-x {}
set $m7-ViewWindow_0-view-eyep_offset-y {}
set $m7-ViewWindow_0-view-eyep_offset-z {}
set $m7-ViewWindow_0-lightColors {{1.0 1.0 1.0} {1.0 1.0 1.0} {1.0 1.0 1.0} {1.0 1.0 1.0} {1.0 1.0 1.0} {1.0 1.0 1.0} {1.0 1.0 1.0} {1.0 1.0 1.0}}
set $m7-ViewWindow_0-lightVectors {{ 0 0 1 } { 0 0 1 } { 0 0 1 } { 0 0 1 } { 0 0 1 } { 0 0 1 } { 0 0 1 } { 0 0 1 }}
set $m7-ViewWindow_0-bgcolor-r {                0}
set $m7-ViewWindow_0-bgcolor-g {                0}
set $m7-ViewWindow_0-bgcolor-b {                0}
set $m7-ViewWindow_0-shading {}
set $m7-ViewWindow_0-do_stereo {0}
set $m7-ViewWindow_0-ambient-scale {1.0}
set $m7-ViewWindow_0-diffuse-scale {1.0}
set $m7-ViewWindow_0-specular-scale {0.4}
set $m7-ViewWindow_0-emission-scale {1.0}
set $m7-ViewWindow_0-shininess-scale {1.0}
set $m7-ViewWindow_0-polygon-offset-factor {1.0}
set $m7-ViewWindow_0-polygon-offset-units {0.0}
set $m7-ViewWindow_0-point-size {1.0}
set $m7-ViewWindow_0-line-width {1.0}
set $m7-ViewWindow_0-sbase {0.40}
set $m7-ViewWindow_0-sr {1}
set $m7-ViewWindow_0-do_bawgl {0}
set $m7-ViewWindow_0-drawimg {}
set $m7-ViewWindow_0-saveprefix {}
set $m7-ViewWindow_0-resx {}
set $m7-ViewWindow_0-resy {}
set $m7-ViewWindow_0-aspect {}
set $m7-ViewWindow_0-aspect_ratio {}
set $m7-ViewWindow_0-global-light {1}
set $m7-ViewWindow_0-global-fog {0}
set $m7-ViewWindow_0-global-debug {0}
set $m7-ViewWindow_0-global-clip {0}
set $m7-ViewWindow_0-global-cull {0}
set $m7-ViewWindow_0-global-dl {0}
set $m7-ViewWindow_0-global-type {Gouraud}
set $m7-ViewWindow_0-ortho-view {0}
set $m7-ViewWindow_0-unused {1}
set $m7-ViewWindow_0-unused {1}
set $m7-ViewWindow_0-unused {1}
set $m7-ViewWindow_0-unused {1}
set $m7-ViewWindow_0-unused {1}
set $m8-notes {}
set $m8-show_status {1}
set $m8-tcl_status {Calling GenStandardColorMaps!}
set $m8-positionList {}
set $m8-nodeList {}
set $m8-width {398}
set $m8-height {40}
set $m8-mapType {2}
set $m8-minRes {12}
set $m8-resolution {128}
set $m8-realres {128}
set $m8-gamma {0}
set $m9-notes {}
set $m9-show_status {1}
set $m9-isoval {0.010}
set $m9-isoval-min {0.00566586}
set $m9-isoval-max {0.99781}
set $m9-isoval-typed {0}
set $m9-isoval-quantity {1}
set $m9-quantity-range {colormap}
set $m9-quantity-min {0}
set $m9-quantity-max {100}
set $m9-isoval-list {0.0 1.0 2.0 3.0}
set $m9-extract-from-new-field {1}
set $m9-algorithm {0}
set $m9-build_trisurf {0}
set $m9-np {1}
set $m9-active-isoval-selection-tab {0}
set $m9-active_tab {MC}
set $m9-update_type {on release}
set $m9-color-r {0.4}
set $m9-color-g {0.2}
set $m9-color-b {0.9}
set $m10-notes {}
set $m10-show_status {1}
set $m10-filename $DATADIR/$DATASET/$DATASET-electrodes.pcd.fld
set $m11-notes {}
set $m11-show_status {1}
set $m11-interpolation_basis {linear}
set $m11-map_source_to_single_dest {0}
set $m11-exhaustive_search {1}
set $m11-exhaustive_search_max_dist {-1}
set $m11-np {1}
set $m12-notes {}
set $m12-show_status {1}
set $m13-notes {}
set $m13-show_status {1}
set $m13-nodes-on {0}
set $m13-nodes-as-disks {0}
set $m13-edges-on {1}
set $m13-edges-transparency {0}
set $m13-faces-on {0}
set $m13-use-normals {0}
set $m13-use-transparency {0}
set $m13-vectors-on {0}
set $m13-normalize-vectors {}
set $m13-has_vector_data {0}
set $m13-bidirectional {0}
set $m13-arrow-heads-on {1}
set $m13-tensors-on {0}
set $m13-has_tensor_data {0}
set $m13-text-on {0}
set $m13-text-use-default-color {1}
set $m13-text-color-r {1.0}
set $m13-text-color-g {1.0}
set $m13-text-color-b {1.0}
set $m13-text-backface-cull {0}
set $m13-text-fontsize {1}
set $m13-text-precision {2}
set $m13-text-render_locations {0}
set $m13-text-show-data {1}
set $m13-text-show-nodes {0}
set $m13-text-show-edges {0}
set $m13-text-show-faces {0}
set $m13-text-show-cells {0}
set $m13-def-color-r {0.3}
set $m13-def-color-g {0.3}
set $m13-def-color-b {0.3}
set $m13-def-color-a {0.5}
set $m13-node_display_type {Spheres}
set $m13-edge_display_type {Cylinders}
set $m13-data_display_type {Arrows}
set $m13-tensor_display_type {Boxes}
set $m13-active_tab {Nodes}
set $m13-node_scale {0.005}
set $m13-edge_scale {0.005}
set $m13-vectors_scale {0.30}
set $m13-tensors_scale {0.30}
set $m13-show_progress {}
set $m13-interactive_mode {Interactive}
set $m13-node-resolution {6}
set $m13-edge-resolution {6}
set $m13-data-resolution {6}
set $m14-notes {}
set $m14-show_status {1}
set $m14-filename $DATADIR/$DATASET/generated/$DATASET-leadfield.mat
set $m15-notes {}
set $m15-show_status {1}
set $m15-metric {invCC}
set $m15-pvalue {1}
set $m16-notes {}
set $m16-show_status {1}
set $m17-notes {}
set $m17-show_status {1}
set $m18-notes {}
set $m18-show_status {1}
set $m18-isFixed {0}
set $m18-min {       0.00566586}
set $m18-max {          0.99781}
set $m18-makeSymmetric {0}
set $m19-notes {}
set $m19-show_status {1}
set $m19-simplexString {Node}
set $m19-xFlag {0}
set $m19-yFlag {0}
set $m19-zFlag {1}
set $m19-idxFlag {0}
set $m19-sizeFlag {0}
set $m19-numNbrsFlag {0}
set $m20-notes {}
set $m20-show_status {1}
set $m21-notes {}
set $m21-show_status {1}
set $m21-isoval {0.185}
set $m21-isoval-min {-0.959494}
set $m21-isoval-max {0.944992}
set $m21-isoval-typed {0}
set $m21-isoval-quantity {1}
set $m21-quantity-range {colormap}
set $m21-quantity-min {0}
set $m21-quantity-max {100}
set $m21-isoval-list {0.0 1.0 2.0 3.0}
set $m21-extract-from-new-field {1}
set $m21-algorithm {0}
set $m21-build_trisurf {1}
set $m21-np {1}
set $m21-active-isoval-selection-tab {0}
set $m21-active_tab {MC}
set $m21-update_type {on release}
set $m21-color-r {0.4}
set $m21-color-g {0.2}
set $m21-color-b {0.9}
set $m22-notes {}
set $m22-show_status {1}
set $m22-interpolation_basis {linear}
set $m22-map_source_to_single_dest {0}
set $m22-exhaustive_search {1}
set $m22-exhaustive_search_max_dist {-1}
set $m22-np {1}
set $m23-notes {}
set $m23-show_status {1}
set $m23-nodes-on {0}
set $m23-nodes-as-disks {0}
set $m23-edges-on {0}
set $m23-edges-transparency {0}
set $m23-faces-on {1}
set $m23-use-normals {0}
set $m23-use-transparency {0}
set $m23-vectors-on {0}
set $m23-normalize-vectors {}
set $m23-has_vector_data {0}
set $m23-bidirectional {0}
set $m23-arrow-heads-on {1}
set $m23-tensors-on {0}
set $m23-has_tensor_data {0}
set $m23-text-on {0}
set $m23-text-use-default-color {1}
set $m23-text-color-r {1.0}
set $m23-text-color-g {1.0}
set $m23-text-color-b {1.0}
set $m23-text-backface-cull {0}
set $m23-text-fontsize {1}
set $m23-text-precision {2}
set $m23-text-render_locations {0}
set $m23-text-show-data {1}
set $m23-text-show-nodes {0}
set $m23-text-show-edges {0}
set $m23-text-show-faces {0}
set $m23-text-show-cells {0}
set $m23-def-color-r {0.5}
set $m23-def-color-g {0.5}
set $m23-def-color-b {0.5}
set $m23-def-color-a {0.5}
set $m23-node_display_type {Spheres}
set $m23-edge_display_type {Lines}
set $m23-data_display_type {Arrows}
set $m23-tensor_display_type {Boxes}
set $m23-active_tab {Faces}
set $m23-node_scale {0.0300}
set $m23-edge_scale {0.0150}
set $m23-vectors_scale {0.30}
set $m23-tensors_scale {0.30}
set $m23-show_progress {}
set $m23-interactive_mode {Interactive}
set $m23-node-resolution {6}
set $m23-edge-resolution {6}
set $m23-data-resolution {6}
set $m24-notes {}
set $m24-show_status {1}
set $m24-outputdataat {Faces}
$m9 initialize_ui
$m21 initialize_ui

::netedit scheduleok
