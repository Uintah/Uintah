<html>
<head>
<meta http-equiv="content-type" content="text/html;charset=iso-8859-1">
<meta name="generator" content="Adobe GoLive 4">
<title>Looking at the Data</title>
</head>

<body bgcolor="#a9a9a9">
<table align="center" border="0" cellpadding="0" cellspacing="0" width="306" bgcolor="#cccccc">
<tr>
<td><img height="92" width="600" src="images/sub-banner.jpg" border="0"
    usemap="#sub-banner8662a0c4"><map name="sub-banner8662a0c4"><area
    coords="581,65,598,84" shape="rect" title nohref><area
    href="chapter_7.html" coords="557,64,575,83" shape="rect"
    title="Feedback"><area href="chapter_6.html" coords="532,64,550,82"
    shape="rect" title="Putting Simulation and Visualization
    Together"><area href="chapter_5.html" coords="508,64,527,83"
    shape="rect" title="Bioelectric Field Simulation"><area
    href="chapter_4.html" coords="483,64,502,83" shape="rect"
    title="Multi-Vis"><area href="chapter_3.html" coords="460,64,478,83"
    shape="rect" title="Derived Fields"><area href="chapter_2.html"
    coords="436,64,454,83" shape="rect" title="Looking at the Data"><area
    href="chapter_1.html" coords="412,64,430,81" shape="rect"
    title="Geometry Visualization"><area href="Intro.html"
    coords="354,64,406,84" shape="rect" title="Introduction"><area
    href="http://software.sci.utah.edu/doc/index.html"
    coords="205,63,343,83" shape="rect" title="Documentation"><area
    href="http://software.sci.utah.edu/" coords="103,63,195,82"
    shape="rect" title="Software"><area href="index.html"
    coords="1,65,92,81" shape="rect" title="Tutorial Home"></map></td> 
</tr>

<tr>
<td>
<center>
<table border="0" cellpadding="0" cellspacing="5" width="600">
  <tr>
    <td>
	<center>
	<br><p><br><A name="section-3"></A>
	<font size="4"
	face="Arial,Helvetica,Geneva,Swiss,SunSans-Regular"
	color="maroon">
	<b>Chapter 2: Looking at the Data</b></font> </p>
	<p>&nbsp; </p>
	</center>
	<div align="left">
	<p><b><H4><A href="#section-1">Color maps</H4></b></A>
	<p><b><H4><A href="#section-2">GenStandardColorMaps UI</H4></b></A>
<p><b><H4><A href="#section-4">RescaleColorMaps UI</p></b></H4></A>
	
	<p><b>Chapter Overview</b><br>

	<p>In Chapter 1, we constructed a small network to visualize
	the geometry of a mesh.  In this chapter we will extend that
	net, adding tools to look at data values on the geometry.
	Specifically, we will visualize a scalar quantity (voltage) on
	a set of points in space (a PointCloud of electrodes).
	
	<p>From our previous net, we hooked three modules
	together--FieldReader, ShowField, and Viewer--as shown in
	<a href="chapter_1.html#figure-1.1">Figure 1.1.</a>  In the user
	interface of the ShowField module, we 
	used the Default Color selector to make all of the geometry
	render blue.  

	<p>In this chapter, rather than mapping a single
	color to all of the geometry, we will vary the colors over the
	geometry based on their scalar values.
	
	<p><b><A name="section-1">Color maps</b><br></A>

	<p>We want to map the data values at each node of the mesh to a
	meaningful color in order to differentiate one data value from another.   
	The color map class in SCIRun provides this mapping.  
	
	<p>A ColorMap contains a set of evenly spaced colors
	(RGBA) mapped to a data value range. The minimum and maximum data value specifies this range. <b>Figure 2.1</b> shows several example color maps. 
	
	</div>
	<center>
	<p><img height="200" width="450" src="images/figures/2_1.jpg"><br>
	<b>Figure 2.1 Color maps from the GenStandardColorMaps module. From top to bottom: Rainbow, Darkhue, Blackbody, Dark Gray</b></p>
	</center>
	<div align="left">
	<p><br>
	
	<p>The GenStandardColorMaps module generates color maps in
	SCIRun. This module contains a selection of default color maps.
	For each color map, the user controls the opacity
	(also known as alpha) for each data value, then chooses the
        number of discrete entries in the color map table.</p>

        <p>The ColorMap determines which
        values in the data are assigned to each color.  By default, the
        minimum/maximum range is from -1 to 1.  

        <P>Using the RescaleColorMap module, you can set the min/max values by
        hand, or, you can auto-scale them to correspond with
       the min/max data value range from a scalar field.
                  
        <p>Now, we can add a GenStandardColorMaps and a RescaleColorMap
         module to our net from <a href="chapter_1.html#chapter1">Chapter
         1</a>.</p>  
<p><ol>
<li>First, open your SCIRun environment and load the show-torso-mesh.net.</p> 
<li><p>Now, add both of 
          these modules, located under the SCIRun/Visualization menu.</p>  
	  <p><li>Connect the output from GenStandardColorMaps to the input of
	      RescaleColorMap.</p>
	  <p><li> Connect the output from the FieldReader to
	      the other input port of RescaleColorMap.</p>  
	  <p><li>Finally, connect the output from RescaleColorMap to the input
	      of ShowField.</p>  
	</ol>
	<p>Your network should now look like <b>Figure 2.2</b>.</p>

	</div>
	<center>
	<p><img height="416" width="300" src="images/figures/2_2.gif"><br>
	<b>Figure 2.2, net with color map modules</b></p>
	</center>
	<div align="left">
	<p><br>

	<p>Note that, RescaleColorMap is another example of a module that has dynamic input ports.
	If the user connects more than one field into RescaleColorMap,
	the min/max range for auto-scaling corresponds to the
	min/max range of data values from all of the input Fields.</p>

	<p>The second input port on the ShowField module accepts a
        ColorMap that maps the data values in its input Field to a color in the
        input ColorMap, and renders accordingly.  If a ColorMap is
        present in ShowField the module ignores the Default
        Color, and uses the ColorMap value.</p>
                  
        <p>To complete this net we must read in a Field.  
	<ol>
	<p><li> <A NAME=electrodes>
	    Use the FieldReader User Interface (UI) to read in
        utahtorso-lowres-electrodes.pcd.fld (a point cloud of
        electrode positions, with voltages measured from a single
        instant in time).</p>  
	<p><li>Select the Autoview option in the ViewWindow and rotate the image downward.</p>
<p><li>In the ShowField UI, change the Node Scale to 6.</p> 
<p><li>You should see an image like <b>Figure 2.3</b> in
	  the ViewWindow.</p>
	</ol>
	</div>
	<center>
	<p><img height="451" width="450" src="images/figures/2_3.gif"><br>
	<b>Figure 2.3, ViewWindow showing utah-torso-lowres-electrodes.pcd.fld</b></p>
	</center>
	<div align="left">
	<p><br>
                  
        <p><b><A name="section-2">GenStandardColorMaps UI</b><br></A>

        <p>Now, we will explore the UIs for the GenStandardColorMaps and RescaleColorMaps modules.  Upon opening the UI for GenStandardColorMaps, you will
        see a window, as shown in <b>Figure 2.4</b>.

	</div>
	<center>
	<p><img height="369" width="300" src="images/figures/2_4.jpg"><br>
	<b>Figure 2.4, UI for GenStandardColorMaps</b></p>
	</center>
	<div align="left">
	<p><br>

        <p><ul>
	  <p><li>A selection of standard maps appears on the left.</p>
	  <p><li>The selected color map appears at the top of the window, and
	      has a clickable interface for changing the opacity of each
	      color swatch in the map.</p>  
	  <p><li>The Shift option indicates a gamma value for non-linear
	      compression or expansion of the otherwise-linear color ramp.</p>
	  <p><li>The Resolution slider sets the number of
	      distinct colors to be stored in the color table.</p>   
	  <p><li>By choosing a low resolution, you can generate
	      <i>banded</i> colors.</p> 
	  <p><li>Choose a higher resolution for smoother color transitions, and a lower resolution for banded colors.</p>
	</ul>  
<p><b><A name="section-4">RescaleColorMaps UI</A></b></p>               
        <p><b>Figure 2.5</b> shows the UI to the RescaleColorMap module.</p>

	</div>
	<center>
	<p><img height="114" width="398" src="images/figures/2_5.gif"><br>
	<b>Figure 2.5</b></p>
	</center>
	<div align="left">
	<p><br>

	<p><ul><li>You can choose whether to set the minimum/maximum range of the
        ColorMap manually or automatically.</p>  
	<p><li>If the range is auto-scaled, it will correspond to the minimum
        and maximum data values from all of the input Fields connected to
	the module.</p></ul> 
                  
        <p>In GenStandardColorMaps, change
	the color map from Inverse Rainbow to Inverse Darkhue, which changes the
	image in the 
        View window from <b>Figure 2.3</b> to <b>Figure 2.6</b>.</p>

        
	</div>
	<center>
	<p><img height="451" width="450" src="images/figures/2_6.gif"><br>
	<b>Figure 2.6</b></p>
	</center>
	<div align="left">
	<p><br>
	</div>
<p>Change the ColorMap range in the RescaleColorMap UI to a Fixed Scale of -30 to 30 in order 
        to &quot;clamp&quot; the range of colors as in <b>Figure 2.7</b>.</p>
	<center>
	<p><img height="451" width="450" src="images/figures/2_7.gif"><br>
	<b>Figure 2.7</b>.</p>
	</center>
	<div align="left">
	<p><br>

        

	<H4><b>Summary</b></H4>
	<p>In this chapter, we have added tools for looking at data values 
	and for varying colors over the geometry, rather than mapping a
	single color.<br> 

	<p>The next chapter features more visualization techniques, and
	explores how  
	to input and output a Field. 
	<br>
	<br><p><A HREF="#section-3">Return to Top</A>
        </div>
	</td>
	</tr>
</table>
</center>
</td>
</tr>
<tr>
<td><img height="35" width="600" src="images/sub-banner-bottom.jpg"
    border="0" usemap="#sub-banner-bottom8ac200bf"><map
    name="sub-banner-bottom8ac200bf"><area href="chapter_3.html"
    coords="564,3,588,18" shape="rect"><area href="chapter_1.html"
    coords="539,1,560,22" shape="rect"><area href="http://www.sci.utah.edu"
    coords="6,6,68,30" shape="rect" title="SCI Institute"></map></td> 
</tr>
</table>
</body>
</html>
