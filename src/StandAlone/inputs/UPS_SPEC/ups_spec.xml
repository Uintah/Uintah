<!--
   UPS_SPEC:
     This specification defines the valid tags, their attributes, and
     their values.  

   DTD/XML Schema:

     This file is similar to a DTD or an XML Schema, however we didn't
     use either of these approaches for the following reasons: DTDs
     do not (easily) allow you to have optional Tags and Tags that may
     appear in any order.  They also don't do (minimal) validation of
     the type of data in each tag.  XML Schema may actually allow for
     some or all of this type of validation, however, we don't have an
     XML library capable of using XML Schema (as libxml2 (the lib we
     use) doesn't (yet?) support it).  We could have tried using
     another XML library (off-line), such as Xerces, but we wanted the
     validation to take place as the code begins to execute.

   Format of this specification:

     A tag specification must look like this:

     <name spec="..." 
           attribute#="..."
           children#="..."
           need_applies_to="..."
     >

     need_applies_to="<var>..." => An optional parameter.  If present, the tag refers to a parent
                             attribute <var>.  This tag allows for specifying how children are to
                             be required (see Values, below).
       * var must be the 'name' of a previously defined attribute for the tag's parent.
       * If a 'need_applies_to' is used, then the parent's attribute must be REQUIRED!
       * Values:
         - ALL => This child tag is required for all versions of the parent tag.  This
                     is the default 
         - list of values => The child tag is required only for the given versions of the parent's attribute.
         

     Only 'spec' is required for a tag.

     name => the name of a given tag (eg: cylinder, Time, etc)

     spec => "need  type  [validValues]"

       * need: OPTIONAL, REQUIRED, MULTIPLE   (Probably need MULTIPLE-REQ and MULTIPLE-OPT.
                                             Currently MULTIPLE means 0 or more...)
       * type: DOUBLE, INTEGER, STRING, VECTOR, MULTIPLE_INTEGERS, MULTIPLE_DOUBLES,
               MULTIPLE_VECTORS, BOOLEAN, NO_DATA (NO_DATA means the tag doesn't have any
                                          data (text) but can have attributes and/or
                                          sub-tags.)
         - MULTIPLE_INTEGERS:  [ #... ]
         - VECTOR:             [ #, #, # ] // 3 numbers (ie: an IntVector)

       * validValues: an optional _single_ string (see below for how it is parsed) that contains valid values
                      or the value of the tag.  The specification of valid values depends on the
                      type of the tag:
  
         - STRING: a comma separated lists of strings which enumerate
                   explicitly which values the string can take on. If 
                   valid values for a string are not provided, then
                   all strings will be accepted.
         - INTEGER/DOUBLE: "positive" = a positive value, "num, num" =
                   min, max values.  If not specified, then any
                   integer/double will be accepted.
               
         - VECTOR: not quite sure how to specify valid values for a
                   vector yet...

                   children => how to handle child tags of this tag.

     attribute#="name _spec_" => attributes for a tag.  The '#' should be replaced with 1, 2, 3... etc,
                   (the numbers must be unique.)  The _spec_ is as above.  (eg: attribute1="label OPTIONAL STRING")

     children# => how to handle child tags of this tag.  The '#' should be replaced with 1, 2, 3... etc,
                   (the numbers must be unique.) 

       * ONE_OF( [ATTRIBUTE|CHILD], [child1|attr1], [child2|attr2], ...) - specifies that only one of the specified child tags is allowed.
                                                           Use ATTRIBUTE or CHILD to specify what this requirement
                                                           applies to.  (One child MUST exist!)
       * ALL_OR_NONE_OF( [ATTRIBUTE|CHILD] child1, child2, ... ) - Must have either all of the child tags, or none.  The child tags
                                                 must be declared OPTIONAL, as this flag will govern their use.

-->

<Uintah_specification> 

  <!--===========================================================-->
  <!-- Begin Common Block -->
  <CommonTags>
    <!-- 
       Tags in this <CommonTags> block are used more than once in the
       Uintah_specification.  In the Uintah_specification, they
       should just be referenced as <tag/>.  Optionally, if the 
       OPTIONAL/REQUIRED spec has changed, they can be referred to as
       <tag spec="NEW_VALUE">.  [Note, do NOT use <CommonTags> for
       any other tag name.]
     
       Note, you can 're-open' the <CommonTags> (anywhere by just
       creating a new <CommonTags></CommonTags> block) to add new
       common tags to it.  Note, however, that the names of all
       'common' tags must be unique across the entire UPS spec.
    -->

    <box                      spec="OPTIONAL NO_DATA"
                                attribute1="label OPTIONAL STRING"
                                children1="ALL_OR_NONE_OF(CHILD min,max)" >
      <min                    spec="OPTIONAL VECTOR" />
      <max                    spec="OPTIONAL VECTOR" />
    </box>

    <cone                     spec="OPTIONAL NO_DATA"
                                attribute1="label    OPTIONAL STRING"
                                children1="ALL_OR_NONE_OF(CHILD bottom,bottom_radius,top,top_radius)" >
      <bottom                 spec="OPTIONAL VECTOR" /> <!-- FYI, ALL_OR_NONE_OF (above) makes all of these required -->
      <bottom_radius          spec="OPTIONAL DOUBLE" />
      <top                    spec="OPTIONAL VECTOR" />
      <top_radius             spec="OPTIONAL DOUBLE" />
    </cone>

    <cylinder                 spec="OPTIONAL NO_DATA"
                                attribute1="label    OPTIONAL STRING" >
      <bottom                 spec="REQUIRED VECTOR" />
      <top                    spec="REQUIRED VECTOR" />
      <radius                 spec="REQUIRED DOUBLE 'positive'" />
      <!-- The following are only used for applying pressure BCs -->
      <cylinder_end           spec="OPTIONAL BOOLEAN" />
      <axisymmetric_end       spec="OPTIONAL BOOLEAN" />
      <axisymmetric_side      spec="OPTIONAL BOOLEAN" />
    </cylinder>

    <torus                 spec="OPTIONAL NO_DATA"
                                attribute1="label    OPTIONAL STRING" >
      <center                 spec="REQUIRED VECTOR" />
      <major_radius           spec="REQUIRED DOUBLE 'positive'" />
      <minor_radius           spec="REQUIRED DOUBLE 'positive'" />
      <axis                   spec="REQUIRED STRING" />
      <theta                  spec="OPTIONAL DOUBLE" />
    </torus>

    <parallelepiped           spec="OPTIONAL NO_DATA"
                                attribute1="label    OPTIONAL STRING" >
      <p1                     spec="OPTIONAL VECTOR" />
      <p2                     spec="OPTIONAL VECTOR" />
      <p3                     spec="OPTIONAL VECTOR" />
      <p4                     spec="OPTIONAL VECTOR" />
    </parallelepiped>
    
    <sphere                   spec="OPTIONAL NO_DATA"
                                attribute1="label    OPTIONAL STRING"
                                children1="ALL_OR_NONE_OF( CHILD origin, radius )" >
      <origin                 spec="OPTIONAL VECTOR" />
      <radius                 spec="OPTIONAL DOUBLE 'positive'" />
    </sphere>
    
    <ellipsoid                   spec="OPTIONAL NO_DATA"
                                attribute1="label    OPTIONAL STRING" >
      <origin                 spec="OPTIONAL VECTOR" />
      <rx                     spec="OPTIONAL DOUBLE 'positive'" />
      <ry                     spec="OPTIONAL DOUBLE 'positive'" />
      <rz                     spec="OPTIONAL DOUBLE 'positive'" />
      <v1                     spec="OPTIONAL VECTOR" />
      <v2                     spec="OPTIONAL VECTOR" />
      <v3                     spec="OPTIONAL VECTOR" />
    </ellipsoid>

    <sphere_membrane          spec="OPTIONAL NO_DATA"
                                attribute1="label    OPTIONAL STRING" >
      <origin                 spec="REQUIRED VECTOR" />
      <radius                 spec="REQUIRED DOUBLE 'positive'" />
      <thickness              spec="REQUIRED DOUBLE 'positive'" />
      <num_lat                spec="REQUIRED DOUBLE 'positive'" />
      <num_long               spec="REQUIRED DOUBLE 'positive'" />
    </sphere_membrane>

    <sphere_shell             spec="OPTIONAL NO_DATA"
                                attribute1="label    OPTIONAL STRING" >
      <origin                 spec="REQUIRED VECTOR" />
      <radius                 spec="REQUIRED DOUBLE 'positive'" />
      <thickness              spec="REQUIRED DOUBLE 'positive'" />
      <num_lat                spec="REQUIRED DOUBLE 'positive'" />
      <num_long                spec="REQUIRED DOUBLE 'positive'" />
    </sphere_shell>

    <cylinder_shell             spec="OPTIONAL NO_DATA"
                                attribute1="label    OPTIONAL STRING" >
      <top                    spec="REQUIRED VECTOR" />
      <bottom                 spec="REQUIRED VECTOR" />
      <radius                 spec="REQUIRED DOUBLE 'positive'" />
      <thickness              spec="REQUIRED DOUBLE 'positive'" />
      <num_axis               spec="REQUIRED DOUBLE 'positive'" />
      <num_circum             spec="REQUIRED DOUBLE 'positive'" />
    </cylinder_shell>

    <plane_shell              spec="OPTIONAL NO_DATA"
                                attribute1="label    OPTIONAL STRING" >
      <center                    spec="REQUIRED VECTOR" />
      <normal                 spec="REQUIRED VECTOR" />
      <radius                 spec="REQUIRED DOUBLE 'positive'" />
      <thickness              spec="REQUIRED DOUBLE 'positive'" />
      <num_radius             spec="REQUIRED DOUBLE 'positive'" />
    </plane_shell>
    

    <!--  Note:  smoothcyl is not intended to be used with the union, difference intersection -->
    <smoothcyl                spec="OPTIONAL NO_DATA"
                                attribute1="label    OPTIONAL STRING" >
      <discretization_scheme  spec="REQUIRED STRING" />
      <bottom                 spec="REQUIRED VECTOR" />
      <top                    spec="REQUIRED VECTOR" />
      <inner_radius           spec="REQUIRED DOUBLE 'positive'" />
      <outer_radius           spec="OPTIONAL DOUBLE 'positive'" />
      <num_radial             spec="REQUIRED DOUBLE 'positive'" />
      <num_axial              spec="REQUIRED DOUBLE 'positive'" />
      <num_angular            spec="OPTIONAL DOUBLE 'positive'" />
      <arc_start_angle        spec="OPTIONAL DOUBLE 'positive'" />
      <arc_angle              spec="OPTIONAL DOUBLE 'positive'" />
      <endcap_thickness       spec="OPTIONAL DOUBLE 'positive'" />
    </smoothcyl>

    <tri                      spec="OPTIONAL NO_DATA"
                                attribute1="label    OPTIONAL STRING"
                                children1="ALL_OR_NONE_OF( CHILD name )" >
      <name                   spec="OPTIONAL STRING" /> <!-- The name of a file containing triangles... I think. -->
    </tri>

    <difference               spec="FORWARD_DECLARATION" />
    <union                    spec="FORWARD_DECLARATION" />
    <intersection             spec="FORWARD_DECLARATION" />

    <union                    spec="OPTIONAL NO_DATA"
                                attribute1="label    OPTIONAL STRING" >
      <box                    spec="MULTIPLE" />
      <cone                   spec="MULTIPLE" />
      <cylinder               spec="MULTIPLE" />
      <torus                  spec="MULTIPLE" />
      <difference             spec="MULTIPLE" />
      <intersection           spec="MULTIPLE" />
      <ellipsoid              spec="MULTIPLE" />
      <sphere                 spec="MULTIPLE" />
      <sphere_membrane        spec="MULTIPLE" />
      <sphere_shell           spec="MULTIPLE" />
      <cylinder_shell         spec="MULTIPLE" />
      <plane_shell            spec="MULTIPLE" />
      <tri                    spec="MULTIPLE" />
      <union                  spec="MULTIPLE" />
      <parallelepiped         spec="MULTIPLE" />
      <smoothcyl              spec="MULTIPLE" />
    </union>

    <!-- FIXME: only can have 2 children, right? how to specify? -->
    <difference               spec="OPTIONAL NO_DATA" 
                                attribute1="label OPTIONAL STRING" >
      <box                    spec="MULTIPLE" />
      <cone                   spec="MULTIPLE" />
      <cylinder               spec="MULTIPLE" />
      <torus                  spec="MULTIPLE" />
      <difference             spec="MULTIPLE" />
      <intersection           spec="MULTIPLE" />
      <ellipsoid              spec="MULTIPLE" />
      <sphere                 spec="MULTIPLE" />
      <sphere_membrane        spec="MULTIPLE" />
      <sphere_shell           spec="MULTIPLE" />
      <cylinder_shell         spec="MULTIPLE" />
      <plane_shell            spec="MULTIPLE" />
      <tri                    spec="MULTIPLE" />
      <union                  spec="MULTIPLE" />
      <parallelepiped         spec="MULTIPLE" />
    </difference>

    <intersection             spec="OPTIONAL NO_DATA"
                                attribute1="label OPTIONAL STRING" >
      <box                    spec="MULTIPLE" />
      <cone                   spec="MULTIPLE" />
      <cylinder               spec="MULTIPLE" />
      <torus                  spec="MULTIPLE" />
      <difference             spec="MULTIPLE" />
      <intersection           spec="MULTIPLE" />
      <ellipsoid              spec="MULTIPLE" />
      <sphere                 spec="MULTIPLE" />
      <sphere_membrane        spec="MULTIPLE" />
      <sphere_shell           spec="MULTIPLE" />
      <cylinder_shell         spec="MULTIPLE" />
      <plane_shell            spec="MULTIPLE" />
      <tri                    spec="MULTIPLE" />
      <union                  spec="MULTIPLE" />
      <parallelepiped         spec="MULTIPLE" />
    </intersection>

    <geom_object              spec="REQUIRED NO_DATA"
                                attribute1="name OPTIONAL STRING" >
      <box                    spec="MULTIPLE" />
      <cone                   spec="MULTIPLE" />
      <cylinder               spec="MULTIPLE" />
      <torus                  spec="MULTIPLE" />
      <difference             spec="MULTIPLE" />
      <intersection           spec="MULTIPLE" />
      <ellipsoid              spec="MULTIPLE" />
      <sphere                 spec="MULTIPLE" />
      <sphere_membrane        spec="MULTIPLE" />
      <sphere_shell           spec="MULTIPLE" />
      <cylinder_shell         spec="MULTIPLE" />
      <plane_shell            spec="MULTIPLE" />
      <smoothcyl              spec="MULTIPLE" />
      <tri                    spec="MULTIPLE" />
      <union                  spec="MULTIPLE" />
      <parallelepiped         spec="MULTIPLE" />

      <file                    spec="OPTIONAL NO_DATA"
                                attribute1="label    OPTIONAL STRING" >
        <name                 spec="OPTIONAL STRING" />
        <var                  spec="MULTIPLE STRING" />
        <format               spec="OPTIONAL STRING" />
        <usePFS               spec="OPTIONAL BOOLEAN"/>
      </file>
      
      <image                  spec="OPTIONAL NO_DATA" >
        <name                 spec="REQUIRED STRING" />
        <res                  spec="OPTIONAL VECTOR" />
        <threshold            spec="OPTIONAL MULTIPLE_DOUBLES" />
      </image>

      <res                     spec="OPTIONAL VECTOR" /> <!-- FIXME: ?? These are only  optional in some cases... -->
      <velocity                spec="OPTIONAL VECTOR" /> <!--           eg, ARCHES doesn't use them... -->
      <level                   spec="OPTIONAL INTEGER"/> 
      <temperature             spec="OPTIONAL DOUBLE" />
      <color                   spec="OPTIONAL DOUBLE" />
      <density                 spec="OPTIONAL DOUBLE" />
      <pressure                spec="OPTIONAL DOUBLE" />
      <volumeFraction          spec="OPTIONAL DOUBLE" />
      <affineTransformation_A0 spec="OPTIONAL VECTOR" /> <!-- If you like to add some new input variables to ... -->
      <affineTransformation_A1 spec="OPTIONAL VECTOR" /> <!-- "geom_object" section, you should also mention them in ... -->
      <affineTransformation_A2 spec="OPTIONAL VECTOR" /> <!-- /src/CCA/Components/MPM/ConstitutiveModel/MPMMaterial.cc -->
      <affineTransformation_b  spec="OPTIONAL VECTOR" />

      <null                   spec="OPTIONAL NO_DATA" /> <!-- FIXME: What is this? -->

      <corrugated                      spec="OPTIONAL NO_DATA" >   <!-- FIXME: is this really optional?  Default? -->
        <xymin                         spec="REQUIRED VECTOR" /> 
        <xymax                         spec="REQUIRED VECTOR" /> 
        <thickness                     spec="REQUIRED DOUBLE" /> 
        <normal                        spec="REQUIRED VECTOR" /> 
        <corr_edge                     spec="REQUIRED STRING 'x+, x-, y+, y-'" />
        <curve                         spec="REQUIRED STRING 'sin'" />
        <wavelength                    spec="REQUIRED DOUBLE" /> 
        <amplitude                     spec="REQUIRED DOUBLE" /> 
      </corrugated>

      <coeff                     spec="OPTIONAL VECTOR"/>
      <cubicInitialize           spec="OPTIONAL BOOLEAN"/>
      <exponentialInitialize_1D  spec="OPTIONAL BOOLEAN"/>
      <freq                      spec="OPTIONAL VECTOR"/>
      <linearInitialize          spec="OPTIONAL BOOLEAN"/>
      <scalar                    spec="OPTIONAL DOUBLE"/>
      <maxScalar                 spec="OPTIONAL DOUBLE"/>
      <sinusoidalInitialize      spec="OPTIONAL BOOLEAN"/>
      <slope                     spec="OPTIONAL VECTOR"/>
      <triangularInitialize      spec="OPTIONAL BOOLEAN"/>
      <quadraticInitialize       spec="OPTIONAL BOOLEAN"/>
      <exponentialInitialize_1D  spec="OPTIONAL BOOLEAN"/>
      <exponentialInitialize_2D  spec="OPTIONAL BOOLEAN"/>
      <concentration             spec="OPTIONAL DOUBLE"/>
      <conductivity              spec="OPTIONAL DOUBLE"/>
      <pos_charge_density        spec="OPTIONAL DOUBLE"/>
      <neg_charge_density        spec="OPTIONAL DOUBLE"/>
      <permittivity              spec="OPTIONAL DOUBLE"/>
    </geom_object>
      
    <SimulationComponent          spec="REQUIRED NO_DATA"
                                    attribute1="type REQUIRED STRING
                                                'arches,
                                                burger,dosweep, ice,
                                                impm, mpm,
                                                mpmarches, 
                                                mpmf, mpmice, amrmpm, wasatch, reduce_uda,
                                                electrostatic_solver,
                                                gauss_solver,
                                                mpnp,
                                                esmpm,
                                                esmpm2,
                                                advectslabs,
                                                unifiedschedulertest,poissongpu1,poisson1,
                                                poisson2, poisson3, poisson4, benchmark,
                                                rigidmpmice,reduce_uda, rmpmice,smpm,
                                                smpmice,switcher,wave,
                                                solvertest, solvertest2, heat,
                                                fdheat, phasefield,
                                                RMCRT_Test particletest'" >
                                  <!-- The 'type' above is used in CCA/Components/Parent/ComponentFactory.cc -->
        <carry_over                 spec="MULTIPLE NO_DATA"
                                  attribute1="var   REQUIRED STRING"
                                  attribute2="matls OPTIONAL INTEGER"
                                  attribute3="level OPTIONAL STRING 'finest'" />
        <subcomponent               spec="MULTIPLE NO_DATA"
                                  attribute1="type OPTIONAL STRING 'arches, burger, ice, impm, mpm, mpmarches, mpmf, mpmice,
                                                                    poisson1, poisson2, poisson3, poisson4, benchmark, rigidmpmice, smpmice, smpm, switcher, wave'" >
                                  <!-- The 'type' above is used in CCA/Components/Parent/ComponentFactory.cc -->
          <input_file               spec="REQUIRED STRING" />
          <SwitchCriteria           spec="OPTIONAL NO_DATA" 
                                  attribute1="type REQUIRED STRING 'steadyBurn, DDT1, Timestep, simpleBurn'" >
            <timestep               spec="REQUIRED INTEGER" need_applies_to="type Timestep"   />
            <reactant_material      spec="REQUIRED INTEGER" need_applies_to="type steadyBurn" />
            <BoundaryParticles      spec="REQUIRED INTEGER" need_applies_to="type steadyBurn" />
            <ThresholdTemperature   spec="REQUIRED INTEGER" need_applies_to="type steadyBurn" />
          </SwitchCriteria>
          <init                     spec="MULTIPLE NO_DATA" 
                                    attribute1="var    REQUIRED STRING"
                                    attribute2="matls  REQUIRED STRING"
                                    attribute3="levels OPTIONAL STRING"/>
          <SimulationComponent          spec="OPTIONAL" />
        </subcomponent>
    </SimulationComponent>

  </CommonTags>
  <!-- End Common Block -->
  <!--===========================================================-->

  <Meta                   spec="OPTIONAL NO_DATA">
    <title                spec="OPTIONAL STRING" />
    <info                 spec="OPTIONAL STRING" />
  </Meta>

  <Unit                   spec="OPTIONAL NO_DATA"
                            attribute1="name REQUIRED STRING 'KG^2'" />  <!-- FIXME: is this a good idea?  If so, how to specify?  Make required! -->

        <ParticlePosition spec="OPTIONAL NO_DATA"
                                                                                attribute1="label REQUIRED STRING"/>
                                                                                
  <Time                      spec="REQUIRED NO_DATA">
    <maxTime                 spec="REQUIRED DOUBLE  'positive'" />
    <max_Timesteps           spec="OPTIONAL INTEGER 'positive'" />
    <end_at_max_time_exactly spec="OPTIONAL BOOLEAN" />
    <initTime                spec="REQUIRED DOUBLE  'positive'" />
    <delt_min                spec="REQUIRED DOUBLE  'positive'" />
    <delt_max                spec="REQUIRED DOUBLE  'positive'" />
    <delt_init               spec="OPTIONAL DOUBLE  'positive'" />
    <max_delt_increase       spec="OPTIONAL DOUBLE  'positive'" />
    <max_initial_delt        spec="OPTIONAL DOUBLE  'positive'" />
    <initial_delt_range      spec="OPTIONAL DOUBLE  'positive'" />
    <override_restart_delt   spec="OPTIONAL DOUBLE  'positive'" />
    <timestep_multiplier     spec="REQUIRED DOUBLE  'positive'" />
    <max_wall_time           spec="OPTIONAL DOUBLE  'positive'" />
  </Time>

  <!-- NOTE: while the DataArchiver section is required, if no 'save' tags are specified,
             then no data will be saved (and no .uda dir will be created). -->
  <DataArchiver               spec="REQUIRED NO_DATA"
                                attribute1="type        OPTIONAL STRING 'PIDX, UDA'"
                                children1="ONE_OF(CHILD outputInterval, outputTimestepInterval)" >
      <!-- CHECKPOINT attributes:
              interval              - How often (in simulation time - seconds) to save a checkpoint.
              cycle                 - How many check points to keep around before one is overwritten (to save disk space).
              timestepInterval      - Checkpoint after this many timesteps have occurred.
              walltimeStart         - Start check pointing after this much real time (in seconds) has elapsed (since beginning the simulation).
              walltimeInterval      - How much real time (in seconds) must pass before the next check point is written.
              walltimeStartHours    - Start check pointing after this much real time (in hours) has elapsed (since beginning the simulation).
              walltimeIntervalHorus - How much real time (in hours) must pass before the next check point is written.  -->
      <checkpoint             spec="OPTIONAL NO_DATA"
                                children1="ONE_OF(ATTRIBUTE interval, walltimeInterval, walltimeIntervalHours, timestepInterval)"
                                children2="ALL_OR_NONE_OF(ATTRIBUTE walltimeStart, walltimeInterval)"
                                children3="ALL_OR_NONE_OF(ATTRIBUTE walltimeStartHours, walltimeIntervalHours)"

                                attribute1="interval              OPTIONAL DOUBLE  'positive'"
                                attribute2="cycle                 REQUIRED INTEGER 'positive'"
                                attribute3="timestepInterval      OPTIONAL INTEGER 'positive'"
                                attribute4="walltimeStart         OPTIONAL INTEGER 'positive'"
                                attribute5="walltimeInterval      OPTIONAL INTEGER 'positive'"
                                attribute6="walltimeStartHours    OPTIONAL DOUBLE  'positive'"
                                attribute7="walltimeIntervalHours OPTIONAL DOUBLE  'positive'"
                                attribute8="lastTimestep          OPTIONAL BOOLEAN" />

      <compression            spec="OPTIONAL STRING 'gzip'" />
      <filebase               spec="REQUIRED STRING" />
      <outputInterval         spec="OPTIONAL DOUBLE 'positive'" />
      <outputInitTimestep     spec="OPTIONAL NO_DATA" />
      <outputTimestepInterval spec="OPTIONAL INTEGER 'positive'" />
      <outputLastTimestep     spec="OPTIONAL BOOLEAN" />

     <!-- HACK: until we know what to do about checking the label names-->
      <save                   spec="MULTIPLE NO_DATA"
                                attribute1="label        REQUIRED STRING"
                                attribute2="levels       OPTIONAL STRING"
                                attribute3="material     OPTIONAL STRING" 
                                attribute4="table_lookup OPTIONAL BOOLEAN" /> <!-- FIXME: are these really STRINGs? and what are the valid values? -->
      <save_crack_geometry    spec="OPTIONAL BOOLEAN" /> <!-- FIXME: default? -->
      <outputDoubleAsFloat    spec="OPTIONAL NO_DATA" />
      
      <PIDX                   spec="OPTIONAL NO_DATA">
        <outputRawIO          spec="OPTIONAL BOOLEAN" />
        <outputPatchSize      spec="OPTIONAL VECTOR"  />
        <debugOutput          spec="OPTIONAL BOOLEAN" />
        <compressionType      spec="OPTIONAL STRING 'NONE, none, CHUNKING, chunking, CHUNKING_ZFP, chunking_ZFP'"/>
      </PIDX>
  </DataArchiver>

  <InitialConditions        spec="OPTIONAL NO_DATA">
    <MPM                    spec="OPTIONAL NO_DATA" />
    <ARCHES                 spec="OPTIONAL NO_DATA" />
  </InitialConditions>

  <!-- Grid Attributes:
          saveToDisk: If set to true (or left out), then the grid (patch layout) is written to disk as part of the the UDA.
          doAMR:      If set to true, then Adaptive Mesh Refinement is turned on. Defaults to off. -->
  <Grid                     spec="REQUIRED NO_DATA"
                            attribute1="saveToDisk OPTIONAL BOOLEAN"
                            attribute2="doAMR      OPTIONAL BOOLEAN">
    <!--____Begin BoundaryConditions section______________________________-->
    <BoundaryConditions     spec="OPTIONAL NO_DATA">
      
      <DefaultMaterial spec="OPTIONAL STRING '0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,all'"/>

      <!-- Specify interior boundary conditions. A minus interior face will return an iterator
      with the cells on the minus side of the boundary. A plus interior face will return an 
      iterator with cells on the plus side of the boundary -->
      <InteriorFace           spec="MULTIPLE NO_DATA"
                              attribute1="annulus       OPTIONAL STRING 'x-, x+, y-, y+, z-, z+'"
                              attribute2="circle        OPTIONAL STRING 'x-, x+, y-, y+, z-, z+'"
                              attribute3="inner_radius  OPTIONAL DOUBLE 'positive'"
                              attribute4="origin        OPTIONAL MULTIPLE_DOUBLES"
                              attribute5="outer_radius  OPTIONAL DOUBLE 'positive'"
                              attribute6="radius        OPTIONAL DOUBLE 'positive'" 
                              attribute7="rectangle     OPTIONAL STRING 'x-, x+, y-, y+, z-, z+'" 
                              attribute8="lower         OPTIONAL MULTIPLE_DOUBLES" 
                              attribute9="upper        OPTIONAL MULTIPLE_DOUBLES"
                              attribute10="ellipse      OPTIONAL STRING 'x-, x+, y-, y+, z-, z+'"                              
                              attribute11="major_radius OPTIONAL DOUBLE 'positive'"
                              attribute12="minor_radius OPTIONAL DOUBLE 'positive'"
                              attribute13="angle        OPTIONAL DOUBLE"                                                                                          
                              attribute14="name         OPTIONAL STRING"
                              attribute15="type         OPTIONAL STRING 'Wall, Velocity, Outflow, Open, User'">                              
                                
        <BCType             spec="MULTIPLE NO_DATA"
                              attribute1="id        OPTIONAL STRING '0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,all'"
                              attribute2="var       REQUIRED STRING 'Neumann, Dirichlet'"
                              attribute3="label     REQUIRED STRING "
                              attribute4="type      OPTIONAL STRING 'int'" 
                              attribute5="value     OPTIONAL STRING" >
                                                                
          <value            spec="OPTIONAL STRING"/>

        </BCType>
      </InteriorFace>
      
      <!-- angle in degrees for ellipse -->
      <Face                 spec="MULTIPLE NO_DATA"
                              attribute1="annulus       OPTIONAL STRING 'x-, x+, y-, y+, z-, z+'"
                              attribute2="circle        OPTIONAL STRING 'x-, x+, y-, y+, z-, z+'"
                              attribute3="inner_radius  OPTIONAL DOUBLE 'positive'"
                              attribute4="origin        OPTIONAL MULTIPLE_DOUBLES"
                              attribute5="outer_radius  OPTIONAL DOUBLE 'positive'"
                              attribute6="side          OPTIONAL STRING 'x-, x+, y-, y+, z-, z+'"
                              attribute7="radius        OPTIONAL DOUBLE 'positive'" 
                              attribute8="rectangle     OPTIONAL STRING 'x-, x+, y-, y+, z-, z+'" 
                              attribute9="lower         OPTIONAL MULTIPLE_DOUBLES" 
                              attribute10="upper        OPTIONAL MULTIPLE_DOUBLES"
                              attribute11="ellipse      OPTIONAL STRING 'x-, x+, y-, y+, z-, z+'"                              
                              attribute12="major_radius OPTIONAL DOUBLE 'positive'"
                              attribute13="minor_radius OPTIONAL DOUBLE 'positive'"
                              attribute14="angle        OPTIONAL DOUBLE"                                                                                          
                              attribute15="name         OPTIONAL STRING"
                              attribute16="type         OPTIONAL STRING 'Wall, Velocity, MassFlow, Inlet, Outflow, Open, Pressure, User'"
                              attribute17="inner_lower  OPTIONAL MULTIPLE_DOUBLES"
                              attribute18="outer_lower  OPTIONAL MULTIPLE_DOUBLES"
                              attribute19="inner_upper  OPTIONAL MULTIPLE_DOUBLES"
                              attribute20="outer_upper  OPTIONAL MULTIPLE_DOUBLES"
                              attribute21="rectangulus   OPTIONAL STRING 'x-, x+, y-, y+, z-, z+'">
                                
    <ParticleBC spec="OPTIONAL NO_DATA"
    children1="ONE_OF(CHILD Wall, Inlet)">
    <!-- spec for particle wall boundary -->                                
    <Wall   spec="OPTIONAL NO_DATA"
    attribute1="walltype REQUIRED STRING 'Elastic, Inelastic, PartiallyElastic'">
    <Restitution spec="OPTIONAL DOUBLE ' positive'" need_applies_to="walltype PartiallyElastic"/>
  </Wall>
    <!-- spec for adding particles - Designates that this face injects particles into the domain -->
    <Inlet                  spec="OPTIONAL NO_DATA">
    <ParticlesPerSecond spec="OPTIONAL DOUBLE"/>
  </Inlet>                                                                
  </ParticleBC>

        <BCType             spec="MULTIPLE NO_DATA"
                              attribute1="id        OPTIONAL STRING '0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,all'"
                              attribute2="var       REQUIRED STRING 'Neumann, Dirichlet, symmetry, LODI, computeFromDensity, Sine, slip, Custom, 
                                                                     VelocityInlet, StABL, PressureBC, WallBC, OutletBC, NOutletBC, VelocityFileInput, MassFlowInlet, PartMassFlowInlet,
                                                                     Swirl, FromFile, ForcedDirichlet, TurbulentInlet, Tabulated powerLawProfile logWindProfile'"
                              attribute3="label     REQUIRED STRING "
                              attribute4="type      OPTIONAL STRING 'int, velocity, handoff'" 
                              attribute5="value     OPTIONAL STRING" >
                                                                
          <value            spec="OPTIONAL STRING"/>

          <inputfile        spec="REQUIRED STRING"  need_applies_to="var TurbulentInlet" />
          
          <period           spec="OPTIONAL INTEGER 'positive'" need_applies_to="var TurbulentInlet"/>
          <timeperiod       spec="OPTIONAL DOUBLE  'positive'" need_applies_to="var TurbulentInlet"/>

          <relative_xyz     spec="REQUIRED VECTOR" need_applies_to="var VelocityFileInput FromFile"/>

          <variable         spec="OPTIONAL NO_DATA" 
                            attribute1="label REQUIRED STRING"/> 

          <!-- When using the FromFile or VelocityFileInput interface, one must supply a default in the 
          event that the handoff file does not contain an iterator for the specified geometry --> 
          <default          spec="REQUIRED NO_DATA" attribute1="type REQUIRED STRING 'Neumann, Dirichlet" 
                            attribute2="value OPTIONAL DOUBLE" 
                            attribute3="velvalue OPTIONAL VECTOR"
                            need_applies_to="var VelocityFileInput FromFile"/> 
          
          <swirl_no         spec="REQUIRED DOUBLE"  need_applies_to="var Swirl"/>

          <!--swirl_centriod is only required for geometries that don't have "origin" set.  See BoundaryCondition.cc for details.-->
          <swirl_centroid   spec="OPTIONAL VECTOR"  need_applies_to="var Swirl"/>

          <!-- Stabilized Atmospheric Boundary Layer --> 
          <!-- When using StABL, the free stream velocity is specified in the <value> tag. --> 
          <roughness        spec="REQUIRED DOUBLE" need_applies_to="var StABL"/> <!-- roughness height for the ground [m]--> 
          <freestream_h     spec="REQUIRED DOUBLE" need_applies_to="var StABL"/> <!-- height of the free stream velocity --> 
          <k                spec="OPTIONAL DOUBLE" need_applies_to="var StABL"/> <!-- von Karman constant, default=0.41 --> 

          <!-- One might want to specify a non-normal, mass flow inlet. This allows one to specify those components -->
          <massflow_unitVector  spec="OPTIONAL VECTOR" need_applies_to="var MassFlowInlet, PartMassFlowInlet"/> <!-- Specify the vector. The Normal component value is ignored. -->

        </BCType>
      </Face>
      
      
      <!--__________________________________-->
      <!--        I C E                     -->
      <LODI                 spec="OPTIONAL NO_DATA">
        <press_infinity     spec="REQUIRED DOUBLE 'positive'" />
        <sigma              spec="REQUIRED DOUBLE '0, 3.15'"/>
        <Li_scale           spec="OPTIONAL DOUBLE '0, 1.0'"/>
        <material           spec="REQUIRED STRING"/>
      </LODI>    

      <SINE_BC              spec="OPTIONAL NO_DATA">
        <omega              spec="REQUIRED DOUBLE 'positive'"/>
        <A                  spec="REQUIRED DOUBLE 'positive'"/>
        <reference_pressure spec="REQUIRED DOUBLE 'positive'"/>
        <reference_velocity spec="REQUIRED VECTOR 'positive'"/>
      </SINE_BC>

      <microSlip            spec="OPTIONAL NO_DATA">
        <alpha_momentum     spec="REQUIRED DOUBLE 'positive'"/>
        <alpha_temperature  spec="REQUIRED DOUBLE 'positive'"/>
        <SlipModel          spec="REQUIRED STRING 'Deissler, Karniadakis-Beskok'" />
        <CreepFlow          spec="REQUIRED BOOLEAN" />
      </microSlip>

      <inletVelocity        spec="OPTIONAL NO_DATA" attribute1="type REQUIRED STRING 'powerLawProfile, logWindProfile'">
        <material           spec="REQUIRED STRING"/>
        <roughness          spec="REQUIRED DOUBLE 'positive'" need_applies_to="type logWindProfile" />
        <exponent           spec="REQUIRED DOUBLE 'positive'" need_applies_to="type powerLawProfile" /> 
        <verticalDirection  spec="REQUIRED INTEGER '0,2'" />
        <maxHeight          spec="OPTIONAL DOUBLE"            need_applies_to="type powerLawProfile"/>
        <variance           spec="OPTIONAL NO_DATA">
          <C_mu             spec="REQUIRED DOUBLE 'positive'"/>
          <frictionVel      spec="REQUIRED DOUBLE 'positive'"/>
        </variance>
        
        
      </inletVelocity>
      
      
    </BoundaryConditions>
    <!--____End BoundaryConditions section______________________________-->
    
    <Level              spec="MULTIPLE NO_DATA">
      <Box              spec="MULTIPLE NO_DATA"
                          attribute1="label     OPTIONAL STRING" 
                          children1="ONE_OF(CHILD autoPatch,patches)">
        <autoPatch      spec="OPTIONAL INTEGER 'positive'" />
        <lower          spec="REQUIRED VECTOR" />
        <upper          spec="REQUIRED VECTOR" />
        <resolution     spec="OPTIONAL VECTOR" />
        <patches        spec="OPTIONAL VECTOR" />
        <extraCells     spec="OPTIONAL VECTOR" />  <!-- FIXME: is this optional?  Arches doesn't need it?  or should everyone say 0,0,0? -->
      </Box>
      <spacing          spec="OPTIONAL VECTOR" /> <!-- ????????? -->
      <periodic         spec="OPTIONAL VECTOR 'positive'"/>
    </Level>
  </Grid>

  <PhysicalConstants    spec="OPTIONAL NO_DATA"> <!-- FIXME: REALLY OPTIONAL??? -->
    <gravity            spec="REQUIRED VECTOR" /> <!-- THIS IS OPTIONAL IN ICE AND MPM, DEFAULT IS 0,0,0 -->
    <reference_pressure spec="OPTIONAL DOUBLE" />
    <reference_point    spec="OPTIONAL VECTOR" />
    <viscosity          spec="OPTIONAL DOUBLE" />
  </PhysicalConstants>

  <CFD                                  spec="OPTIONAL NO_DATA" >

    <CanAddICEMaterial                  spec="OPTIONAL BOOLEAN" />            <!-- FIXME: This belongs in CFD/ICE -->
    <cfl                                spec="OPTIONAL INTEGER 'positive'" /> <!-- FIX ME: REALLY OPTIONAL??? -->

    <include href="ice_spec.xml"    section="CFD/ICE" />
    <include href="arches_spec.xml" section="CFD/ARCHES" />

  </CFD>

  <!--__________________________________-->

  <DataAnalysis                         spec="OPTIONAL NO_DATA" >
    <Module                             spec="MULTIPLE NO_DATA"
                                          attribute1="name REQUIRED STRING 'lineExtract, planeExtract, containerExtract, particleExtract flatPlate_heatFlux firstLawThermo minMax vorticity radiometer momentumAnalysis statistics'" >
      
      <!--  Common __________________________________-->
      <material                         spec="OPTIONAL STRING" />
      <materialIndex                    spec="OPTIONAL INTEGER" />
      <samplingFrequency                spec="REQUIRED DOUBLE"  need_applies_to="name lineExtract, planeExtract, containerExtract, particleExtract, firstLawThermo, minMax"/>
      <timeStart                        spec="REQUIRED DOUBLE"  need_applies_to="name lineExtract, planeExtract, containerExtract, particleExtract, firstLawThermo, minMax, statistics"/>
      <timeStop                         spec="REQUIRED DOUBLE"  need_applies_to="name lineExtract, planeExtract, containerExtract, particleExtract, firstLawThermo, minMax, statistics"/>
      <colorThreshold                   spec="REQUIRED DOUBLE"  need_applies_to="name particleExtract"/>
       
      <Variables                        spec="OPTIONAL NO_DATA" need_applies_to="name lineExtract planeExtract particleExtract minMax statistics">
        <analyze                        spec="MULTIPLE NO_DATA"
                                          attribute1="label REQUIRED STRING" 
                                          attribute2="matl  OPTIONAL STRING"
                                          attribute3="level OPTIONAL STRING"
                                          attribute4="computeReynoldsStress OPTIONAL STRING" />
      </Variables>
      
      <!--  lineExtract __________________________________-->
      <lines                            spec="OPTIONAL NO_DATA" need_applies_to="name lineExtract">
        <line                           spec="MULTIPLE NO_DATA" attribute1="name REQUIRED STRING" > 
          <startingPt                   spec="REQUIRED VECTOR" />
          <endingPt                     spec="REQUIRED VECTOR" />
          <stepSize                     spec="OPTIONAL DOUBLE 'positive'"/>
        </line>
      </lines>
      
      <!--  planeExtract __________________________________-->
      <planes                           spec="OPTIONAL NO_DATA" need_applies_to="name planeExtract">
        <plane                          spec="MULTIPLE NO_DATA" attribute1="name REQUIRED STRING" > 
          <startingPt                   spec="REQUIRED VECTOR" />
          <endingPt                     spec="REQUIRED VECTOR" />
          <timeStart                    spec="OPTIONAL DOUBLE 'positive'" />
          <timeStop                     spec="OPTIONAL DOUBLE 'positive'" />
        </plane>
      </planes>      
      
      <!--  flatPlate_heatFlux ____________________________-->
      <plane                           spec="MULTIPLE NO_DATA" need_applies_to="name flatPlate_heatFlux"> 
        <startingPt                    spec="REQUIRED VECTOR" />
        <endingPt                      spec="REQUIRED VECTOR" />
      </plane>
      
      <!--  container extract _____________________________-->
      <objects                          spec="OPTIONAL NO_DATA" need_applies_to="name containerExtract">
        <geom_object>
          <extract                      spec="MULTIPLE NO_DATA"
                                        attribute1="var OPTIONAL STRING"
                                        attribute2="mode REQUIRED STRING 'interior, surface, incident, net, velocity'"/>
        </geom_object>

      </objects>
      
      <!--1st lawThermo __________________________________-->
      <engy_convt_factor                spec="OPTIONAL DOUBLE"  need_applies_to="name firstLawThermo"/> 
      <controlVolume                    spec="OPTIONAL NO_DATA" need_applies_to="name firstLawThermo momentumAnalysis">       
        <Face                           spec="MULTIPLE NO_DATA"  
                                          attribute1="side REQUIRED STRING 'x-, x+, y-, y+, z-, z+'" 
                                          attribute2="extents REQUIRED STRING 'entireFace, partialFace'">
          <startPt                      spec="OPTIONAL VECTOR" />
          <endPt                        spec="OPTIONAL VECTOR" />
        </Face>
      </controlVolume>

      <!--momentumAnalysis__________________________________--> 
      <uvel_FC                          spec="OPTIONAL NO_DATA"     need_applies_to="name momentumAnalysis" attribute1="label REQUIRED STRING"/> 
      <vvel_FC                          spec="OPTIONAL NO_DATA"     need_applies_to="name momentumAnalysis" attribute1="label REQUIRED STRING"/>
      <wvel_FC                          spec="OPTIONAL NO_DATA"     need_applies_to="name momentumAnalysis" attribute1="label REQUIRED STRING"/>
      <vel_CC                           spec="OPTIONAL NO_DATA"     need_applies_to="name momentumAnalysis" attribute1="label REQUIRED STRING"/>
      <rho_CC                           spec="OPTIONAL NO_DATA"     need_applies_to="name momentumAnalysis" attribute1="label REQUIRED STRING"/>      

      <!--Radiometer ____________________________________--> 
      <radiometerCalc_freq                spec="REQUIRED DOUBLE"  need_applies_to="name radiometer" />
      <include href="RMCRT_radiometer.xml" section="Radiometer" />
 
      <!--statistics ____________________________________--> 
      <computeHigherOrderStats         spec="OPTIONAL BOOLEAN"  need_applies_to="name statistics" />
            
    </Module>
  </DataAnalysis>
  
  <!--__________________________________-->
  
  <AMR                                  spec="OPTIONAL NO_DATA" >
    <doMultiTaskgraphing                spec="OPTIONAL BOOLEAN" />
    <useLockStep                        spec="OPTIONAL BOOLEAN" /> <!-- defaults to FALSE.  FIXME: correct?  Is it optional? -->

    <include href="ice_spec.xml"        section="AMR/ICE" />
    <include href="mpm_spec.xml"        section="AMR/MPM" />
    <include href="fvm_spec.xml"        section="AMR/FVM" />

    <Regridder                          spec="OPTIONAL NO_DATA"
                                          attribute1="type REQUIRED STRING 'Tiled, SingleLevel'" >
      <adaptive                         spec="OPTIONAL BOOLEAN" />
      
      <!-- Generic Required Regridder Options --> 
      <max_levels                       spec="REQUIRED INTEGER 'positive'" />
      
      
      
      <!-- Generic Optional Regridder Options --> 
      <regrid_once                      spec="OPTIONAL BOOLEAN" />
      <amr_overhead_high                spec="OPTIONAL DOUBLE '0,1'" />   
      <amr_overhead_low                 spec="OPTIONAL DOUBLE '0,1'" />   
      <cell_stability_dilation          spec="OPTIONAL VECTOR" />
      <cell_regrid_dilation             spec="OPTIONAL VECTOR" />
      <dynamic_dilation                 spec="OPTIONAL BOOLEAN" />   
      <max_dilation                     spec="OPTIONAL BOOLEAN" />
      <max_timestep_interval            spec="OPTIONAL INTEGER" />   
      <min_timestep_interval            spec="OPTIONAL INTEGER" />   
      
      <!-- Required SingleLevel Regridder -->
      <new_patch_layout                 spec="REQUIRED VECTOR"             need_applies_to="type SingleLevel"/>
      <level                            spec="OPTIONAL INTEGER 'positive'" need_applies_to="type SingleLevel"/>
      
      <!--Required BNR Regridder & Tiled Regridder Options-->
      <min_patch_size                   spec="REQUIRED MULTIPLE_VECTORS" need_applies_to="type Tiled"/>
      <min_boundary_cells               spec="REQUIRED VECTOR"           need_applies_to="type Tiled"/>
      <cell_refinement_ratio            spec="REQUIRED STRING"           need_applies_to="type Tiled"/>
      

      <!-- Optional Options-->
      <patches_per_level_per_proc       spec="OPTIONAL DOUBLE 'positive'" need_applies_to="type Tiled" />

    </Regridder>
  </AMR>
  
  <!-- Scheduler Options -->
  
  <Scheduler              spec="OPTIONAL NO_DATA"
                            attribute1="type OPTIONAL STRING 'MPI DynamicMPI Unified KokkosOpenMP'">
    <small_messages       spec="OPTIONAL BOOLEAN" />
    <taskReadyQueueAlg    spec="OPTIONAL STRING 'MostChildren LeastChildren MostAllChildren LeastAllChildren MostL2Children LeastL2Children PatchOrder PatchOrderRandom MostMessages LeastMessages Random FCFS Stack'" />
    <TaskMonitoring       spec="OPTIONAL NO_DATA">
      <per_cell           spec="OPTIONAL BOOLEAN" />
      <attribute          spec="MULTIPLE STRING 'LoadBalancerCost ExecTime WaitTime'" />
      <task               spec="MULTIPLE NO_DATA"
                          attribute1="name REQUIRED STRING"
                          attribute2="attribute REQUIRED STRING 'ExecTime WaitTime'" />
    </TaskMonitoring>
    <VarTracker           spec="OPTIONAL NO_DATA">
      <start_time         spec="REQUIRED DOUBLE"  />
      <end_time           spec="REQUIRED DOUBLE"  />
      <level              spec="OPTIONAL INTEGER" />
      <start_index        spec="REQUIRED VECTOR"  />
      <end_index          spec="REQUIRED VECTOR"  />
      <patchid            spec="OPTIONAL INTEGER" />
      <var                spec="MULTIPLE NO_DATA"
                            attribute1="label REQUIRED STRING"
                            attribute2="dw    REQUIRED STRING 'NewDW OldDW CoarseNewDW CoarseOldDW ParentOldDW ParentNewDW'" />
      <locations          spec="OPTIONAL NO_DATA"
                            attribute1="before_comm OPTIONAL BOOLEAN"
                            attribute2="before_exec OPTIONAL BOOLEAN"
                            attribute3="after_exec  OPTIONAL BOOLEAN" />
      <task               spec="MULTIPLE NO_DATA"
                            attribute1="name REQUIRED STRING" />
    </VarTracker>
  </Scheduler>

  <!--__________________________________-->
  <!-- image or preprocessing specs     -->
  <PreprocessTools        spec="OPTIONAL NO_DATA" >
    <rawToUniqueGrains    spec="OPTIONAL NO_DATA" >
      <image              spec="REQUIRED STRING" />
      <ppc                spec="REQUIRED VECTOR 'positive'" />
      <res                spec="REQUIRED VECTOR 'positive'" />
      <outputBasename     spec="REQUIRED STRING" />
      
      <matl               spec="MULTIPLE NO_DATA"
                          attribute1="index REQUIRED STRING">
        <threshold        spec="REQUIRED MULTIPLE_DOUBLES" />
      </matl>
      
      <uniqueGrains       spec="OPTIONAL NO_DATA">
        <matlIndex        spec="REQUIRED MULTIPLE_DOUBLES" />
        <threshold        spec="REQUIRED MULTIPLE_DOUBLES" />
      </uniqueGrains>
      

    </rawToUniqueGrains>
  </PreprocessTools>
  
  <!--__________________________________-->
  <LoadBalancer            spec="OPTIONAL NO_DATA" 
                             attribute1="type REQUIRED STRING 'Simple SimpleLoadBalancer RoundRobin DLB PLB'" >
                             
    <costAlgorithm         spec="OPTIONAL STRING 'Model,ModelLS,Kalman,Memory'" />
    <dynamicAlgorithm      spec="OPTIONAL STRING 'particle3, patchFactor, patchFactorParticles, random, Zoltan'" />
    <doSpaceCurve          spec="OPTIONAL BOOLEAN" /> <!-- default is true-->
    <hasParticles          spec="OPTIONAL BOOLEAN" /> <!-- should the cost algorithms take into account particles-->
    <timestepInterval      spec="REQUIRED INTEGER 'positive'" />

    <profileTimestepWindow spec="OPTIONAL INTEGER 'positive'" /> <!-- the number of timesteps that the profiled weight will take up 99% of the weight -->
    <gainThreshold         spec="OPTIONAL DOUBLE '0,1'" /> <!-- the percent improvement that a reloadbalance must have over an old load balance to be used-->
    <levelIndependent      spec="OPTIONAL BOOLEAN" /> <!-- default is true -->
    <outputNthProc         spec="OPTIONAL INTEGER 'positive'"/>

    <zoltanAlgorithm       spec="OPTIONAL STRING 'HSFC RIB RCB'" />
    <zoltanIMBTol          spec="OPTIONAL DOUBLE 'positive'" />
    
    <!--The remaining tags should not need to be set unless using "Model"-->
    <cellCost              spec="OPTIONAL DOUBLE 'positive'" /> <!--The weight per cell -->
    <particleCost          spec="OPTIONAL DOUBLE 'positive'" /> <!-- The weight per particle -->
    <patchCost             spec="OPTIONAL DOUBLE 'positive'" /> <!-- The weight per patch -->
    <extraCellCost         spec="OPTIONAL DOUBLE 'positive'" /> <!--The weight extra cell -->
  </LoadBalancer>

  <Multimaterial                       spec="OPTIONAL NO_DATA" >               
    <fluidThermalConductivity          spec="REQUIRED DOUBLE" />               
    <heatExchange                      spec="REQUIRED BOOLEAN" />              
    <turbulentPrandtNo                 spec="REQUIRED DOUBLE" />               
    <fluidHeatCapacity                 spec="REQUIRED DOUBLE" />               
    <IfCutCell                         spec="REQUIRED BOOLEAN" />              
    <StationarySolid                   spec="REQUIRED BOOLEAN" />              
    <inviscid                          spec="REQUIRED BOOLEAN" />              
    <restart                           spec="REQUIRED BOOLEAN" />              
    <fixedCellType                     spec="REQUIRED BOOLEAN" />              
    <fixedTemp                         spec="REQUIRED BOOLEAN" />              
    <TestCutCells                      spec="REQUIRED BOOLEAN" />              
    <stairstep                         spec="REQUIRED BOOLEAN" />              
  </Multimaterial>

  <include href="mpm_spec.xml" section="Uintah_specification/MPM"   />
  <include href="fvm_spec.xml" section="Uintah_specification/FVM"   />
  <include href="fvm_spec.xml" section="Uintah_specification/ESMPM" />

  <MaterialProperties                    spec="MULTIPLE NO_DATA"
                                           attribute1="add OPTIONAL BOOLEAN" >
    <include href="mpm_spec.xml" section="MaterialProperties/MPM" />
    <include href="ice_spec.xml" section="MaterialProperties/ICE" />
    <include href="fvm_spec.xml" section="MaterialProperties/FVM" />

  </MaterialProperties>
  
  <!--  Models        -->
  <include href="Models.xml" />
  
  <!--  MPM           -->
  <include href="mpm_spec.xml" section="Uintah_specification/PhysicalBC" />

  <SimulationComponent          spec="REQUIRED" />

  <!-- FIXME: why is this at the top level?  Shouldn't it be under a component or some such?  Todd? -->
  <Solver                     spec="OPTIONAL NO_DATA" 
                              attribute1="type REQUIRED STRING 'CGSolver, direct, hypre, hypreamr'" >
    <Parameters               spec="OPTIONAL NO_DATA" 
                              attribute1="variable OPTIONAL STRING" >      
      <solver                 spec="REQUIRED STRING 'SMG, smg, PFMG, pfmg, SparseMSG, sparsemsg, CG, cg, conjugategradient, PCG, Hybrid, hybrid, GMRES, gmres, AMG, amg, BoomerAMG, boomeramg, FAC, fac'" />                               
      <preconditioner         spec="REQUIRED STRING 'None, none, SMG, smg, PFMG, pfmg, SparseMSG, sparsemsg, Jacobi, jacobi, Diagonal, diagonal, AMG, amg, BoomerAMG, boomeramg, FAC, fac'" />                            
      <tolerance              spec="REQUIRED DOUBLE" />                                         
      <maxiterations          spec="OPTIONAL INTEGER 'positive'" />                             
      <npre                   spec="REQUIRED INTEGER" />                                        
      <npost                  spec="REQUIRED INTEGER" />                                        
      <skip                   spec="REQUIRED INTEGER" />                                        
      <jump                   spec="OPTIONAL INTEGER" />                                        
      <logging                spec="OPTIONAL INTEGER 'positive'" />                             
      <setupFrequency         spec="OPTIONAL INTEGER" />                                        
      <updateCoefFrequency    spec="OPTIONAL INTEGER" />                                              
      <solveFrequency         spec="OPTIONAL INTEGER" />                                              
      <relax_type             spec="OPTIONAL INTEGER '0,3'"/> <!-- 0=jacobi,1=weighted jacobi,2=rb symmetric,3=rb non-symmetric --> 
      <outputEquations        spec="OPTIONAL BOOLEAN" />                                        
    </Parameters>
  </Solver>


  
         
  <!--______________________________________________________________________-->
  <!--                 EXAMPLES                                             -->
  
  <!-- RMCRT_Test   component  -->
  <include href="RMCRT_test.xml"/>
  
  <!-- Burger         -->
  <Burger                     spec="OPTIONAL NO_DATA">
    <delt                     spec="REQUIRED DOUBLE 'positive'" />
  </Burger>

  <!--  DOSWeep  Component -->
  <DOSweep                    spec="OPTIONAL NO_DATA">
    <delt                     spec="REQUIRED DOUBLE 'positive'" />
    <X_Laplacian              spec="OPTIONAL NO_DATA" />
    <Y_Laplacian              spec="OPTIONAL NO_DATA" />
    <Z_Laplacian              spec="OPTIONAL NO_DATA" />
    <Parameters               spec="OPTIONAL NO_DATA"                                           
                                attribute1="variable OPTIONAL STRING 'implicitPressure'" >      
      <criteria               spec="OPTIONAL STRING 'Absolute relative'" />                     
      <jump                   spec="OPTIONAL INTEGER" />                                        
      <logging                spec="OPTIONAL INTEGER 'positive'" />                             
      <maxiterations          spec="OPTIONAL INTEGER 'positive'" />                             
      <norm                   spec="OPTIONAL STRING 'LInfinity linfinity L1 l1 L2 l2'" />       
      <npost                  spec="REQUIRED INTEGER" />                                        
      <npre                   spec="REQUIRED INTEGER" />                                        
      <preconditioner         spec="REQUIRED STRING 'none, pfmg, smg'" />                            
      <outputEquations        spec="OPTIONAL BOOLEAN" />                                        
      <skip                   spec="REQUIRED INTEGER" />                                        
      <setupFrequency         spec="OPTIONAL INTEGER" />                                        
      <updateCoefFrequency    spec="OPTIONAL INTEGER" />                                              
      <solver                 spec="REQUIRED STRING 'smg, SMG, PFMG, pfmg, SparseMSG, sparsemsg, CG, cg, Hybrid, hybrid, GMRES, gmres amg'" />                               
      <tolerance              spec="REQUIRED DOUBLE" />                                         
      <relax_type             spec="OPTIONAL INTEGER '0,3'"/> <!-- 0=jacobi,1=weighted jacobi,2=rb symmetric,3=rb non-symmetric --> 
    </Parameters>
    
  </DOSweep>

  <!-- Heat -->
  <Heat                       spec="OPTIONAL NO_DATA" >
    <delt                     spec="REQUIRED DOUBLE" />
    <alpha                    spec="REQUIRED DOUBLE" />
    <R0                       spec="REQUIRED DOUBLE" />
    <gamma                    spec="REQUIRED DOUBLE" />
    <refine_threshold         spec="OPTIONAL DOUBLE" />
  </Heat>

  <!-- Poisson        -->
  <Poisson                    spec="OPTIONAL NO_DATA" >
    <delt                     spec="REQUIRED DOUBLE" />
    <maxresidual              spec="REQUIRED DOUBLE" />
  </Poisson>

  <FDHeat spec="OPTIONAL NO_DATA" >
    <delt                     spec="REQUIRED DOUBLE" />
    <alpha                    spec="REQUIRED DOUBLE" />
    <R0                       spec="REQUIRED DOUBLE" />
    <gamma                    spec="OPTIONAL DOUBLE" />
    <scheme                   spec="OPTIONAL STRING 'forward_euler, backward_euler, crank_nicolson'" />
    <refine_threshold         spec="OPTIONAL DOUBLE" />
    <node_centered            spec="OPTIONAL BOOLEAN"/>
    <dimension                spec="OPTIONAL INTEGER '2,3'"/>
    <verbosity                spec="OPTIONAL INTEGER '0,4'"/>
  </FDHeat>

  <PhaseField spec="OPTIONAL NO_DATA" >
    <delt                     spec="REQUIRED DOUBLE" />
    <alpha                    spec="REQUIRED DOUBLE" />
    <R0                       spec="REQUIRED DOUBLE" />
    <Delta                    spec="REQUIRED DOUBLE" />
    <epsilon                  spec="REQUIRED DOUBLE" />
    <phi0                     spec="OPTIONAL DOUBLE" />
    <refine_threshold         spec="OPTIONAL DOUBLE" />
    <gamma_psi                spec="OPTIONAL DOUBLE" />
    <gamma_u                  spec="OPTIONAL DOUBLE" />
    <node_centered            spec="OPTIONAL BOOLEAN"/>
    <dimension                spec="OPTIONAL INTEGER"/>
    <verbosity                spec="OPTIONAL INTEGER"/>
    <ws_test                  spec="OPTIONAL BOOLEAN"/>
  </PhaseField>

  <AdvectSlabs                spec="OPTIONAL NO_DATA" >
    <delt                     spec="REQUIRED DOUBLE" />
  </AdvectSlabs>
  
  <UnifiedSchedulerTest       spec="OPTIONAL NO_DATA" >
    <delt                     spec="REQUIRED DOUBLE" />
    <maxresidual              spec="REQUIRED DOUBLE" />
  </UnifiedSchedulerTest>  

  <!--  Particle Test Component -->
  <ParticleTest1              spec="OPTIONAL NO_DATA" >
    <doOutput                 spec="OPTIONAL INTEGER" />
    <doGhostCells             spec="OPTIONAL INTEGER" />
  </ParticleTest1>
  
  <!--  Wave  Component -->
  <Wave                       spec="OPTIONAL NO_DATA" >
    <radius                   spec="OPTIONAL DOUBLE 'positive'" />
    <initial_condition        spec="OPTIONAL STRING" />
    <integration              spec="OPTIONAL STRING" />
    <refine_threshold         spec="OPTIONAL INTEGER" />
  </Wave>
  
  <!--  Solver Test  Component -->
  <SolverTest                 spec="OPTIONAL NO_DATA">
    <delt                     spec="REQUIRED DOUBLE 'positive'" />
    <X_Laplacian              spec="OPTIONAL NO_DATA" />
    <Y_Laplacian              spec="OPTIONAL NO_DATA" />
    <Z_Laplacian              spec="OPTIONAL NO_DATA" />
    <Parameters               spec="OPTIONAL NO_DATA"                                           
                                attribute1="variable OPTIONAL STRING 'implicitPressure'" >      
      <criteria               spec="OPTIONAL STRING 'Absolute relative'" />                     
      <jump                   spec="OPTIONAL INTEGER" />                                        
      <logging                spec="OPTIONAL INTEGER 'positive'" />                             
      <maxiterations          spec="OPTIONAL INTEGER 'positive'" />                             
      <norm                   spec="OPTIONAL STRING 'LInfinity linfinity L1 l1 L2 l2'" />       
      <npost                  spec="REQUIRED INTEGER" />                                        
      <npre                   spec="REQUIRED INTEGER" />                                        
      <preconditioner         spec="REQUIRED STRING 'none, pfmg, smg'" />                            
      <outputEquations        spec="OPTIONAL BOOLEAN" />                                        
      <skip                   spec="REQUIRED INTEGER" />                                        
      <setupFrequency         spec="OPTIONAL INTEGER" />                                        
      <solver                 spec="REQUIRED STRING 'smg, SMG, PFMG, pfmg, SparseMSG, sparsemsg, CG, cg, Hybrid, hybrid, GMRES, gmres amg'" />                               
      <tolerance              spec="REQUIRED DOUBLE" />                                         
      <relax_type             spec="OPTIONAL INTEGER '0,3'"/> <!-- 0=jacobi,1=weighted jacobi,2=rb symmetric,3=rb non-symmetric --> 
    </Parameters>
    
  </SolverTest>

  <!-- Wasatch Component -->
  <include href="wasatch_spec.xml" section="" />

</Uintah_specification>
