Function: README
Author:   Tony Saad
Date:     Sept, 2012
Modified: April, 2013

This directory contains a widely used test case for verifying your turbulence model. The case consists of a isotropic-turbulence initial conditions that decay over time. The initial conditions correspond to periodic grids of sizes 32x32x32 and 64x64x64, respectively. These are provided by the files:

cbc32_uvw_wasatch_u.gz
cbc32_uvw_wasatch_v.gz
cbc32_uvw_wasatch_w.gz

cbc64_uvw_wasatch_u.gz
cbc64_uvw_wasatch_v.gz
cbc64_uvw_wasatch_w.gz

The cbc terminology is in honor of the original experiment by Comte-Bellot and Corrsin in which they generated grid turbulence and extracted plenty of flow statistics including energy spectra.

This directory also contains a collection of Matlab scripts that will help you post-process your data by calculating the energy spectrum given (u,v,w) data generated by Wasatch (or other uintah components).

There are two ways to generating the comparisons with the CBC data.

---------------
METHOD 1
---------------
In general, you will only need to work with the function plot_energy_spectrum_all. All other Matlab scripts include helper functions that are used by plot_energy_spectrum_all. To use this plot_energy_spectrum_all, follow these steps:

1. Run your turbulent flow simulation

2. Use lineextract to save your u, v, and w velocities at t = 0.0s, t = 0.28s, and t= 0.66s as these correspond to the experimental datapoints

3. With lineextract, save your output as: 
    uvel/vvel/wvel_basename_t0.28s/t0.66s.txt
    for example: vvel_32_wasatch_csmag_t0.28s.txt is the lineextract for the y-velocity field. here, the basename is 32_wasatch_csmag.

4. Execute plot_energy_spectrum_all(output_filename,base_name, figure_title). 
Here, the output_filename designates the pdf filename of the exported figure, base_name denotes the base_name in the lineextract output filename, and figure_title is a string that corresponds to the figure's title. For example, plot_energy_spectrum_all('ke_wasatch_wale_32','32_wasatch_wale','Wale model, C_w = 0.7') will look for lineextract files with names:
uvel_32_wasatch_wale_t0.28s.txt
vvel_32_wasatch_wale_t0.28s.txt
wvel_32_wasatch_wale_t0.28s.txt
uvel_32_wasatch_wale_t0.66s.txt
vvel_32_wasatch_wale_t0.66s.txt
wvel_32_wasatch_wale_t0.66s.txt
The output pdf figure will have the title ke_wasatch_wale_32.pdf and will have the title: Wale model, C_w = 0.7.

---------------
METHOD 2
---------------
Alternatively, if you want to execute the entire verification suite, simply execute the "run-verification-tests.sh" bash script. This script requires that you provide it with an absolute path to the sus directory. Example:
./run-verification-tests.sh /scratch/local/aurora/tsaad/uintah/opt/StandAlone/ (don't forget the forward slash "/" at the end).
Also, make sure that you add your Matlab executable to your path, otherwise, the matlab plots will NOT be generated.
