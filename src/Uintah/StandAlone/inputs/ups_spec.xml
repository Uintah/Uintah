
<!--
   UPS_SPEC:
     This specification defines the valid tags, their attributes, and
     their values.  

   DTD/XML Schema:

     This file is similar to a DTD or an XML Schema, however we didn't
     use either of these approaches for the following reasons: DTD's
     do not (easily) allow you to have optional Tags and Tags that may
     appear in any order.  They also don't do (minimal) validation of
     the type of data in each tag.  XML Schema may actually allow for
     some or all of this type of validation, however, we don't have an
     XML library capable of using XML Schema (as libxml2 (the lib we
     use) doesn't (yet?) support it.  We could have tried using
     another XML library (off-line), such as Xerces, but we wanted the
     validation to take place as the code begins to execute.

   Format of this specification:

     spec: need  type  validValues

       need: OPTIONAL, REQUIRED, MULTIPLE   (Probably need MULTIPLE-REQ and MULTIPLE-OPT.
                                             Currently MULTIPLE means 0 or more...)
       type: DOUBLE, INTEGER, STRING, VECTOR, MULTIPLE_INTEGERS,
             MULTIPLE_DOUBLES, NO_DATA (NO_DATA means the tag doesn't have any
                                        data (text) but can have attributes and/or
                                        sub-tags.)

       validValues is a _single_ string (see below for how it is parsed) that contains valid values
       or the value of the tag.  The specification of valid values depends on the type of the tag:
  
         STRING: a comma separated lists of strings which enumerate
                 explicitly which values the string can take on. If 
                 valid values for a string are not provided, then
                 all strings will be accepted.
         INTEGER/DOUBLE: "positive" = a positive value, "num, num" =
                 min, max values.  If not specified, then any
                 integer/double will be accepted.
               
         VECTOR: not quite sure how to specify valid values for a
         vector yet...

       Probably need a way to specify that if one tag exists, then
       another is not valid... perhaps we need a few more of these type
       of things too.  Let me know if you run into cases like this
       that should be enumerated so that they can be validated.
-->


<Uintah_specification> 

  <!--===========================================================-->
  <!-- Begin Common Block -->
  <CommonTags>
    <!-- 
       Tags in this <CommonTags> block are used more than once in the
       Uintah_specification.  In the Uintah_specification, they
       should just be referenced as <tag/>.  Optionally, if the 
       OPTIONAL/REQUIRED spec has changed, they can be referred to as
       <tag spec="NEW_VALUE">
    -->

    <cylinder                   spec="OPTIONAL NO_DATA"
                                   attribute1="label    REQUIRED STRING"
                                   children="ALL_OR_NONE" >
      <bottom                   spec="REQUIRED VECTOR" />
      <top                      spec="REQUIRED VECTOR" />
      <radius                   spec="REQUIRED DOUBLE 'positive'" />
    </cylinder>

    <box                        spec="OPTIONAL NO_DATA"
                                   attribute1="label REQUIRED STRING"
                                   children="ALL_OR_NONE" >
      <min                      spec="OPTIONAL VECTOR" />
      <max                      spec="OPTIONAL VECTOR" />
    </box>

    <geom_object                spec="REQUIRED NO_DATA" >
      <box/>
      <cylinder/>

      <res                      spec="REQUIRED VECTOR" />
      <velocity                 spec="REQUIRED VECTOR" />
      <temperature              spec="REQUIRED DOUBLE" />
      <density                  spec="OPTIONAL DOUBLE" /> <!-- FIXME: is this really optional? -->
      <pressure                 spec="OPTIONAL DOUBLE" /> <!-- FIXME: is this really optional? -->

      <difference               spec="OPTIONAL NO_DATA" >
        <box                    spec="MULTIPLE" />
      </difference>
    </geom_object>

  </CommonTags>
  <!-- End Common Block -->
  <!--===========================================================-->

  <Meta                 spec="OPTIONAL NO_DATA">
    <title              spec="OPTIONAL STRING" />
  </Meta>

  <Time                   spec="REQUIRED NO_DATA">
    <maxTime              spec="REQUIRED DOUBLE  'positive'" />
    <max_Timesteps        spec="OPTIONAL INTEGER 'positive'" />
    <end_on_max_time_exactly spec="OPTIONAL BOOLEAN" />
    <initTime             spec="REQUIRED DOUBLE  'positive'" />
    <delt_min             spec="REQUIRED DOUBLE  'positive'" />
    <delt_max             spec="REQUIRED DOUBLE  'positive'" />
    <delt_init            spec="OPTIONAL DOUBLE  'positive'" />
    <max_delt_increase    spec="OPTIONAL DOUBLE  'positive'" />
    <max_initial_delt     spec="OPTIONAL DOUBLE  'positive'" />
    <timestep_multiplier  spec="REQUIRED DOUBLE  'positive'" />
  </Time>

  <SimulationComponent  spec="OPTIONAL NO_DATA"> <!-- FIXME: is this really optional? -->
    <type               spec="REQUIRED STRING 'mpm, arches, ice, mpmice, mpmarches, impm, switcher'" />
  </SimulationComponent>

  <!-- NOTE: while the DataArchiver section is required, if no 'save' tags are specified,
             then no data will be saved (and no .uda dir will be created). -->
  <DataArchiver         spec="REQUIRED NO_DATA"
                                   children="ONE_OF(outputInterval, outputTimestepInterval)" >
      <filebase         spec="REQUIRED STRING" />
      <outputInterval   spec="OPTIONAL DOUBLE 'positive'" /> <!-- FIXME: only one of these should be allowed... -->
      <outputTimestepInterval spec="OPTIONAL INTEGER 'positive'" />

     <!-- HACK: until we know what to do about checking the label names-->
      <save             spec="MULTIPLE NO_DATA"
                        attribute1="label  OPTIONAL STRING"
                        attribute2="table_lookup OPTIONAL BOOLEAN" />
<!--
      <save             spec="MULTIPLE NO_DATA"
                        attribute1="label     REQUIRED STRING 
                            'press_equil_CC, vol_frac_CC, sp_vol_CC, uvel_FC, vvel_FC, wvel_FC, uvel_FCME, vvel_FCME,
                             wvel_FCME, delP_Dilatate, delP_MassX, press_CC, mass_L_CC, mom_source_CC, mom_L_ME_CC, vel_CC, rho_CC, rhs, 
                             scalar-f, speedSound_CC, temp_CC,
                             KineticEnergy, TotalIntEng, TotalMass, StrainEnergy, CenterOfMassPosition,
                             CenterOfMassVelocity, p.x, p.volume, p.stress, g.mass, g.stressFS'" />
-->
      <!-- ???? IS checkpoint REALLY OPTIONAL???? -->
      <checkpoint       spec="OPTIONAL NO_DATA"
                        attribute1="interval  REQUIRED DOUBLE  'positive'"
                        attribute2="cycle     REQUIRED INTEGER 'positive'" />
      <outputDoubleAsFloat spec="OPTIONAL NO_DATA" />
      <compression         spec="OPTIONAL STRING 'gzip'" />
  </DataArchiver>

  <Debug                    spec="OPTIONAL NO_DATA" >
    <dbg_timeStart          spec="REQUIRED DOUBLE" />
    <dbg_timeStop           spec="REQUIRED DOUBLE" />
    <dbg_outputInterval     spec="REQUIRED DOUBLE" />
    <dbg_BeginIndex         spec="REQUIRED STRING" /> <!-- FIXME: HOW TO HANDLE VALUES LIKE: [[0,0,0]] -->
    <dbg_EndIndex           spec="REQUIRED STRING" /> <!-- FIXME: HOW TO HANDLE VALUES LIKE: [[0,0,0]] -->
    <dbg_Matls              spec="REQUIRED MULTIPLE_INTEGERS" />
    <dbg_SigFigs            spec="OPTIONAL INTEGER '1, 20'" />
    <dbg_Level              spec="OPTIONAL INTEGER '1, 20'" />
    <dbg_SymmetryPlanes     spec="OPTIONAL INTEGER '1, 3'" />
    <dbg_Sym_absolute_tol   spec="OPTIONAL DOUBLE  'positive'" />
    <dbg_Sym_relative_tol   spec="OPTIONAL DOUBLE  'positive'" />
    <dbg_Sym_cutoff_value   spec="OPTIONAL DOUBLE  'positive'" />
    
    <debug              spec="MULTIPLE NO_DATA"
                        attribute1="label REQUIRED STRING 'switchTestConservation_abc, 
                                                           switchDebug_Initialize, 
                                                           switchDebug_equil_press, 
                                                           switchDebug_PressDiffRF, 
                                                           switchDebug_vel_FC, 
                                                           switchDebug_Temp_FC, 
                                                           switchDebug_Exchange_FC, 
                                                           switchDebug_explicit_press, 
                                                           switchDebug_setupMatrix, 
                                                           switchDebug_setupRHS, 
                                                           switchDebug_updatePressure, 
                                                           switchDebug_computeDelP, 
                                                           switchDebug_PressFC, 
                                                           switchDebug_LagrangianValues, 
                                                           switchDebug_LagrangianSpecificVol, 
                                                           switchDebug_LagrangianTransportedVars, 
                                                           switchDebug_MomentumExchange_CC, 
                                                           switchDebug_Source_Sink, 
                                                           switchDebug_advance_advect, 
                                                           switchDebug_conserved_primitive, 
                                                           switchDebug_AMR_refine, 
                                                           switchDebug_AMR_refineInterface, 
                                                           switchDebug_AMR_coarsen, 
                                                           switchDebug_AMR_reflux,
                                                           switchDebug_InterpolateNCToCC_0,
                                                           switchDebug_InterpolateCCToNC,
                                                           switchDebug_InterpolatePAndGradP'"/>
  </Debug>

  <InitialConditions    spec="OPTIONAL NO_DATA">
    <MPM                spec="OPTIONAL NO_DATA" />
    <ARCHES             spec="OPTIONAL NO_DATA" />
  </InitialConditions>

  <Grid                 spec="REQUIRED NO_DATA">

    <BoundaryConditions spec="OPTIONAL NO_DATA">
      <LODI             spec="OPTIONAL NO_DATA">
        <press_infinity spec="REQUIRED DOUBLE 'positive'" />
        <sigma          spec="REQUIRED DOUBLE '0, 1'"/>
        <ice_material_index spec="REQUIRED INTEGER '0, 6'"/>
      </LODI>    
      <SINE_BC          spec="OPTIONAL NO_DATA">
        <omega          spec="REQUIRED DOUBLE 'positive'"/>
        <A              spec="REQUIRED DOUBLE 'positive'"/>
      </SINE_BC>
      
      <Face             spec="MULTIPLE NO_DATA"
                        attribute1="side      REQUIRED STRING 'x-, x+, y-, y+, z-, z+'">
        <BCType         spec="MULTIPLE NO_DATA"
                        attribute1="id        REQUIRED STRING '0,1,2,3,5,6,all'"
                        attribute2="var       REQUIRED STRING 'Neumann, Dirichlet, symmetry, LODI, computeFromDensity, Sine'"
                        attribute3="label     REQUIRED STRING 'Pressure, Velocity, Temperature, Density, Symmetric, scalar-f, SpecificVol'" >
          <value        spec="OPTIONAL STRING" /> <!-- ERROR... it is required for some, but not for Dirichlet!!!
                                                       also, type can be different for different labels... how to handle? --> 
        </BCType>
      </Face>
    </BoundaryConditions>

    <Level              spec="MULTIPLE NO_DATA">
      <Box              spec="REQUIRED NO_DATA"
                           attribute1="label     REQUIRED STRING">
        <lower          spec="REQUIRED VECTOR" />
        <upper          spec="REQUIRED VECTOR" />
        <resolution     spec="OPTIONAL VECTOR" />
        <patches        spec="REQUIRED VECTOR" />
        <extraCells     spec="REQUIRED VECTOR" />
      </Box>
      <spacing          spec="OPTIONAL VECTOR" /> <!-- ????????? -->
      <periodic         spec="OPTIONAL VECTOR 'positive'"/>
    </Level>

  </Grid>

  <PhysicalConstants    spec="OPTIONAL NO_DATA"> <!-- FIXME: REALLY OPTIONAL??? -->
    <gravity            spec="REQUIRED VECTOR" /> <!-- THIS IS OPTIONAL IN ICE AND MPM, DEFAULT IS 0,0,0 -->
    <reference_pressure spec="OPTIONAL DOUBLE" />
    <ideal_gas_constant spec="OPTIONAL DOUBLE" />
    <pressure           spec="OPTIONAL DOUBLE" />
    <viscosity          spec="OPTIONAL DOUBLE" />
  </PhysicalConstants>

  <CFD                                  spec="OPTIONAL NO_DATA" >

    <cfl                                spec="OPTIONAL INTEGER 'positive'" /> <!-- FIX ME: REALLY OPTIONAL??? -->
    <ICE                                spec="OPTIONAL NO_DATA" >
      <advection                        spec="REQUIRED NO_DATA" 
                                           attribute1="type REQUIRED STRING 'FirstOrder, SecondOrder'" />
      <TimeStepControl                  spec="OPTIONAL NO_DATA">
        <Scheme_for_delT_calc           spec="REQUIRED STRING 'aggressive, conservative'" />
        <knob_for_speedSound            spec="REQUIRED DOUBLE '0,1 '"/>
      </TimeStepControl>
      <ImplicitSolver                   spec="OPTIONAL NO_DATA">
        <max_outer_iterations           spec="REQUIRED INTEGER 'positive'"/>
        <outer_iteration_tolerance      spec="REQUIRED DOUBLE 'positive'"/>
        <iters_before_timestep_restart  spec="REQUIRED INTEGER 'positive'"/>
       <!--    TO BE FILLED IN TODD
        <Parameters variable="implicitPressure">
         <norm>     LInfinity  </norm>
         <criteria> Absolute   </criteria>
         <solver>         cg      </solver>
         <preconditioner> pfmg    </preconditioner>
         <tolerance>      1.e-10  </tolerance>
         <maxiterations>  7500    </maxiterations>
         <npre>           1       </npre>
         <npost>          1       </npost>
         <skip>           0       </skip>
         <jump>           0       </jump>
        </Parameters> -->
      </ImplicitSolver>
      
      
    </ICE>        

    <ARCHES                             spec="OPTIONAL NO_DATA" >
      <grow_dt                          spec="REQUIRED DOUBLE 'positive'" />
      <variable_dt                      spec="REQUIRED BOOLEAN" />
      <nonlinear_solver                 spec="REQUIRED STRING 'explicit,
                                                               picard'" />
      <turbulence_model                 spec="REQUIRED STRING 'compdynamicprocedure,
                                                               smagorinsky'" />
      <transport_mixture_fraction       spec="REQUIRED BOOLEAN" />
      <transport_enthalpy               spec="REQUIRED BOOLEAN" />
      <transport_reacting_scalar        spec="OPTIONAL BOOLEAN" />
      <transport_extra_scalars          spec="OPTIONAL BOOLEAN" /> <!-- IF TRUE, then requires an extra scalar block-->
      <model_mixture_fraction_variance  spec="REQUIRED BOOLEAN" />
      <set_initial_condition            spec="OPTIONAL BOOLEAN" /> <!-- IF TRUE, then requires init_cond_input_file-->
      <init_cond_input_file             spec="OPTIONAL STRING" /> <!-- Should be required if set_intial_condition is true-->
      <turnonMixedModel                 spec="OPTIONAL BOOLEAN" />
      <recompileTaskgraph               spec="OPTIONAL BOOLEAN" />
      <scalarUnderflowCheck             spec="OPTIONAL BOOLEAN" />
      <EKTCorrection                    spec="OPTIONAL BOOLEAN" />
      <doMMS                            spec="OPTIONAL BOOLEAN" /> <!-- IF TRUE, then requires MMS block-->
      <MMS                              spec="OPTIONAL NO_DATA" > <!--Should change requirements on this MMS block if doMMS is true -->
        <whichMMS                       spec="REQUIRED STRING" /> 
        <constantMMS                    spec="OPTIONAL NO_DATA"> <!--REQUIRED if whichMMS == constantMMS-->
          <cu                           spec="REQUIRED DOUBLE"/>
          <cv                           spec="REQUIRED DOUBLE"/>
          <cw                           spec="REQUIRED DOUBLE"/>
          <cp                           spec="REQUIRED DOUBLE"/>
          <phi0                         spec="REQUIRED DOUBLE"/>
          <esphi0                       spec="REQUIRED DOUBLE"/>
        </constantMMS>
        <almgrenMMS                     spec="OPTIONAL NO_DATA"> <!--REQUIRED if whichMMS == almgrenMMS-->
          <amplitude                    spec="REQUIRED DOUBLE"/>
        </almgrenMMS>
      </MMS>
      <Turbulence                       spec="REQUIRED NO_DATA" >
        <!--smagorinsky -->
        <cf                             spec="OPTIONAL DOUBLE 'positive'" />  
        <fac_mesh                       spec="OPTIONAL DOUBLE 'positive'" />
        <filterl                        spec="OPTIONAL DOUBLE 'positive'" />
        <!--dyn. smagorinsky -->
        <dynamicScalarModel             spec="OPTIONAL BOOLEAN" />
        <filter_cs_squared              spec="OPTIONAL BOOLEAN" />
        <!-- going to leave complocal out based on the 'this model is a mess' comment-->
        <turbulentPrandtlNumber         spec="REQUIRED DOUBLE 'positive'" /> <!--currently set to default in code to 0.4-->
      </Turbulence>

      <Properties                       spec="REQUIRED NO_DATA" >  
        <mixing_model                   spec="REQUIRED STRING 'coldFlowMixingModel,
                                                               TabPropsTable'" />
        <independent_variable           spec="REQUIRED STRING" 
                                            attribute1="active OPTIONAL STRING 'yes, true, no, false'"
                                            attribute2="name REQUIRED STRING"
                                            attribute3="value OPTIONAL DOUBLE" /> <!-- default value for "active" is true, default value for "value" is 0; you can put as many independent variable tags as you want -->
        <ColdflowMixingModel            spec="REQUIRED NO_DATA" >
          <Stream                       spec="MULTIPLE NO_DATA" >
            <density                    spec="REQUIRED DOUBLE 'positive'" />
            <temperature                spec="REQUIRED DOUBLE" />
          </Stream>
        </ColdflowMixingModel>

        <TabPropsTable                  spec="REQUIRED NO_DATA" >
          <table_file_name              spec="REQUIRED STRING" />
          <strict_mode                  spec="OPTIONAL BOOLEAN" />
          <diagnostic_mode              spec="OPTIONAL BOOLEAN" />
        </TabPropsTable>

      </Properties>

      <BoundaryConditions               spec="REQUIRED NO_DATA" >
        <FlowInlet                      spec="MULTIPLE NO_DATA" >
          <InletVelocity                spec="REQUIRED DOUBLE" />
          <mixture_fraction             spec="REQUIRED DOUBLE" />
          <geom_object/>
        </FlowInlet>

        <PressureBC                     spec="REQUIRED NO_DATA" >
          <mixture_fraction             spec="REQUIRED DOUBLE 'positive'" />
          <geom_object/>
        </PressureBC>

        <OutletBC                       spec="REQUIRED NO_DATA" >
          <mixture_fraction             spec="REQUIRED DOUBLE 'positive'" />
          <geom_object/>
        </OutletBC>
      </BoundaryConditions>

      <!-- FIXME: What is the different between this and the other PhysicalConstants? -->
      <PhysicalConstants                spec="REQUIRED NO_DATA" >
        <gravity                        spec="REQUIRED VECTOR" />
        <ref_point                      spec="REQUIRED VECTOR" />
        <viscosity                      spec="REQUIRED DOUBLE" />
      </PhysicalConstants>

      <ExplicitSolver                   spec="REQUIRED NO_DATA" >
        <timeIntegratorType             spec="REQUIRED STRING 'RK2SSP'" />
        <probe_data                     spec="REQUIRED BOOLEAN" />

        <PressureSolver                 spec="REQUIRED NO_DATA" >
          <linear_solver                spec="REQUIRED STRING 'hypre'" />
          <LinearSolver                 spec="REQUIRED NO_DATA" >
            <res_tol                    spec="REQUIRED DOUBLE" />
            <ksptype                    spec="REQUIRED STRING 'cg'" />
            <pctype                     spec="REQUIRED STRING 'pfmg" />
            <max_iter                   spec="REQUIRED INTEGER 'positive'" />
          </LinearSolver>
        </PressureSolver>

        <MomentumSolver                 spec="REQUIRED NO_DATA" >
          <convection_scheme            spec="REQUIRED STRING 'central'" />
        </MomentumSolver>

        <MixtureFractionSolver          spec="REQUIRED NO_DATA" >
          <convection_scheme            spec="REQUIRED STRING 'central-upwind'" />
        </MixtureFractionSolver>

      </ExplicitSolver>

    </ARCHES>

  </CFD>

  <AMR                                  spec="OPTIONAL NO_DATA" >
    <ICE                                spec="OPTIONAL NO_DATA" >
      <orderOfInterpolation             spec="REQUIRED INTEGER 'positive'" />
      <useLockStep                      spec="REQUIRED BOOLEAN" />
      <do_Refluxing                     spec="REQUIRED BOOLEAN" />
      <Refinement_Criteria_Thresholds   spec="OPTIONAL NO_DATA" /> 
    </ICE>
    <Regridder                          spec="OPTIONAL NO_DATA" >
      <!--Generic Required Regridder Options --> 
      <max_levels                       spec="REQUIRED INTEGER 'positive'" />
      <cell_refinement_ratio            spec="REQUIRED STRING" />
      <type                             spec="REQUIRED STRING 'BNR, Hierarchical, Tiled'" />   
      <min_boundary_cells               spec="REQUIRED VECTOR" />
      
      <!--Generic Optional Regridder Options --> 
      <min_timestep_interval            spec="OPTIONAL INTEGER" />   
      <max_timestep_interval            spec="OPTIONAL INTEGER" />   
      <dynamic_dilation                 spec="OPTIONAL BOOLEAN" />   
      <amr_overhead_low                 spec="OPTIONAL DOUBLE '0,1'" />   
      <amr_overhead_high                spec="OPTIONAL DOUBLE '0,1'" />   
      <cell_stability_dilation          spec="OPTIONAL VECTOR" />
      <cell_regrid_dilation             spec="OPTIONAL VECTOR" />
      <dynamic_dilation                 spec="OPTIONAL BOOLEAN" />
      <max_dilation                     spec="OPTIONAL BOOLEAN" />

      <!--Required BNR Regridder & Tiled Regridder Options-->
      <min_patch_size                   spec="OPTIONAL STRING" />

      <!--Optional BNR Regridder Options-->
      <patch_split_tolerance            spec="OPTIONAL DOUBLE '0,1'" />   
      <patch_combine_tolerance          spec="OPTIONAL DOUBLE '0,1'" />   
      <patch_ratio_to_target            spec="OPTIONAL DOUBLE '0,1'" />   
      <patches_per_level_per_proc       spec="OPTIONAL DOUBLE '0,1'" />   

      <!--Required Hierarchical Regridder-->
      <lattice_refinement_ratio         spec="OPTIONAL STRING" />
    </Regridder>
  </AMR>

  <Scheduler              spec="OPTIONAL NO_DATA">
    <VarTracker           spec="REQUIRED NO_DATA">
      <start_time         spec="REQUIRED DOUBLE" />
      <end_time           spec="REQUIRED DOUBLE" />
      <start_index        spec="REQUIRED VECTOR" />
      <end_index          spec="REQUIRED VECTOR" />
      <var                spec="MULTIPLE NO_DATA"
                          attribute1="label REQUIRED STRING"
                          attribute2="dw    REQUIRED STRING 'NewDW, OldDW'" />
    </VarTracker>
  </Scheduler>

  <MPM                    spec="OPTIONAL NO_DATA" >
    <time_integrator      spec="REQUIRED STRING 'explicit, implicit'" />
    <interpolator         spec="REQUIRED STRING 'linear, gimp, 3rdorderBS, 4thorderBS'" />
    <DoExplicitHeatConduction spec="OPTIONAL BOOLEAN" />
    <DoImplicitHeatConduction spec="OPTIONAL BOOLEAN" />
    <do_grid_reset       spec="OPTIONAL BOOLEAN" />
    <minimum_particle_mass     spec="OPTIONAL DOUBLE 'positive'"/>
    <maximum_particle_velocity spec="OPTIONAL DOUBLE 'positive'"/>
    <artificial_damping_coeff  spec="OPTIONAL DOUBLE 'positive'"/>
    <artificial_viscosity      spec="OPTIONAL BOOLEAN" />
    <artificial_viscosity_coeff1    spec="OPTIONAL DOUBLE" />
    <artificial_viscosity_coeff2    spec="OPTIONAL DOUBLE" />
    <accumulate_strain_energy  spec="OPTIONAL BOOLEAN" />
    <use_load_curves           spec="OPTIONAL BOOLEAN" />
    <axisymmetric              spec="OPTIONAL BOOLEAN" />
    <!-- FIXME:  THE FOLLOW APPLY ONLY TO THE IMPLICIT MPM CODE -->
        <dynamic  spec="OPTIONAL BOOLEAN" />
        <solver   spec="OPTIONAL STRING 'petsc, simple'" />
        <convergence_criteria_disp    spec="OPTIONAL DOUBLE 'positive'"/>
        <convergence_criteria_energy  spec="OPTIONAL DOUBLE 'positive'"/>
  </MPM>

  <MaterialProperties               spec="OPTIONAL NO_DATA">
    <MPM                            spec="OPTIONAL NO_DATA">
      <material                     spec="REQUIRED NO_DATA">
        <density                    spec="REQUIRED DOUBLE" />
        <heat_transfer_coefficient  spec="OPTIONAL DOUBLE" />
        
        <!-- HOW TO DEAL WITH THE MANY OPTIONS HERE? -->
        <constitutive_model         spec="REQUIRED NO_DATA"
                                    attribute1="type REQUIRED STRING 'comp_mooney_rivlin, comp_neo_hook, elastic_plastic, hypo_elastic, hypoelastic_plastic, ideal_gas, membrane, mw_visco_elastic, rigid, shell_CNH, small_strain_plastic, trans_iso_hyper, water'">
          <he_constant_1            spec="REQUIRED DOUBLE 'positive'" />
          <he_constant_2            spec="REQUIRED DOUBLE 'positive'" />
          <he_PR                    spec="REQUIRED DOUBLE 'positive'" />
        </constitutive_model>
        <thermal_conductivity       spec="REQUIRED DOUBLE 'positive'" />
        <specific_heat              spec="REQUIRED DOUBLE 'positive'" />
        <geom_object                spec="MULTIPLE" />
      </material>
      <contact                      spec="REQUIRED NO_DATA" >
        <type                       spec="REQUIRED STRING 'null, single_velocity, rigid, specified, friction, approach'" />
        <mu                         spec="OPTIONAL DOUBLE 'positive'" /> <!-- ONLY USED FOR FRICTION OR APPROACH -->
        <materials                  spec="OPTIONAL MULTIPLE_INTEGERS" />
      </contact>
      <thermal_contact              spec="OPTIONAL NO_DATA" />
    </MPM>

    <ICE                      spec="OPTIONAL NO_DATA" > 
      <material               spec="MULTIPLE NO_DATA"
                              attribute1="name OPTIONAL STRING" >
        <EOS                  spec="REQUIRED NO_DATA"
                              attribute1="type REQUIRED STRING 'ideal_gas'" />
        <dynamic_viscosity    spec="REQUIRED DOUBLE 'positive'" />
        <thermal_conductivity spec="REQUIRED DOUBLE 'positive'" />
        <specific_heat        spec="REQUIRED DOUBLE 'positive'" />
        <gamma                spec="REQUIRED DOUBLE 'positive'" />

        <geom_object          spec="MULTIPLE" />
      </material>
    </ICE>

    <exchange_properties      spec="OPTIONAL NO_DATA" >
      <exchange_coefficients  spec="REQUIRED NO_DATA" >
        <momentum             spec="REQUIRED MULTIPLE_DOUBLES" />
        <heat                 spec="REQUIRED MULTIPLE_DOUBLES" />
      </exchange_coefficients>
    </exchange_properties>

  </MaterialProperties>

  <Models                     spec="OPTIONAL NO_DATA" >
    <Model                    spec="REQUIRED NO_DATA"
                              attribute1="type REQUIRED STRING" >
      <fromMaterial           spec="REQUIRED STRING 'source'" />
      <toMaterial             spec="REQUIRED STRING 'destination'" />
      <rate                   spec="REQUIRED DOUBLE" />
    </Model>
  </Models>

  <PhysicalBC                 spec="OPTIONAL NO_DATA" >
    <MPM                      spec="REQUIRED NO_DATA" >
      <force                  spec="MULTIPLE NO_DATA" >
        <lower                spec="REQUIRED VECTOR" />
        <upper                spec="REQUIRED VECTOR" />
        <force_density        spec="REQUIRED VECTOR" />
      </force>
    </MPM>
  </PhysicalBC>

</Uintah_specification>
