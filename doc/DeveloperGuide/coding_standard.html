<!--
  The contents of this file are subject to the University of Utah Public
  License (the "License"); you may not use this file except in compliance
  with the License.
  
  Software distributed under the License is distributed on an "AS IS"
  basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  License for the specific language governing rights and limitations under
  the License.
  
  The Original Source Code is SCIRun, released March 12, 2001.
  
  The Original Source Code was developed by the University of Utah.
  Portions created by UNIVERSITY are Copyright (C) 2001, 1994 
  University of Utah. All Rights Reserved.
-->

<HTML>
<HEAD>
  <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
  <TITLE>Coding Standards C++ Specification</TITLE>
  <LINK REL="STYLESHEET" HREF="../doc_styles.css" TYPE="text/css">
</HEAD>
<BODY>
<!-- *************************************************************** -->
<!-- ********** STANDARD SCI RESEARCH HEADER WITH MENU ************* -->
<!-- *************************************************************** -->
<center><img SRC="../images/research_menuheader.jpg" usemap="#head-links" height="71" width="600" border="0"></center>
<map name="head-links">
	<area href="http://www.sci.utah.edu" shape="rect" coords="7,4,171,33" alt="SCI Home">
	<area href="../index.html" shape="rect" coords="340,10,480,32" alt="Documentation">
	<area href="http://www.sci.utah.edu/software" shape="rect" coords="490,10,586,32" alt="Software">
	<area href="../InstallGuide/installguide.xml?cont=0&amp;dir=2" shape="rect" coords="0,41,156,64" alt="Installation Guide">
	<area href="../UserGuide/userguide.html" shape="rect" coords="157,41,256,64" alt="User's Guide">
	<area href="../DeveloperGuide/devguide.xml?cont=0&amp;dir=2" shape="rect" coords="257,41,397,64" alt="Developer's Guide">
	<area href="../ReferenceGuide/refguide.html" shape="rect" coords="398,41,535,64" alt="Reference Guide">
	<area href="../FAQ/faq.xml?cont=0&amp;dir=2" shape="rect" coords="536,41,600,64" alt="FAQ">
</map>
<!-- *************************************************************** -->
<!-- *************************************************************** -->

<p class="title">SCIRun C++ Coding Standards</p>

<p class="head">Table of contents</p>
<p>
The following list documents the SCIRun Coding Standards.  Any questions
or requested modifications should be sent to scirun-exec@cs.utah.edu.
</p>

<ol class="toc">
<li><a href="#required">SCIRun Required Standards</a></li>
<li><a href="#sci-advice">SCIRun Advice</a></li>
</ol>

<p class="head"><a name="required">SCIRun Required Standards</a></p>
<ol>
  <li>
      All code and comments are to be written in English. 
  </li>
  <li>
      All files must include appropriate license information. 
  </li>
  <li>
      Use the c++ mode in GNU Emacs , and the sci-c++-style.el to format code. 
  </li>
  <li>
      Include files in C++ always have the file name extension `.h'. 
  </li>
  <li>
      Implementation files in C++ always have the file name extension `.cc'. 
  </li>
  <li>
      Every include file must contain a mechanism that prevents multiple
      inclusions of the file.  

      The #if guard should be of the form :
      &quot;Libraryname_Filename_h&quot;.  For example:
      <pre class="example">
      #ifndef Geometry_BBox_h
      #define Geometry_BBox_h

      (code...)

      #endif // Geometry_BBox_h
      </pre>
  </li>
  <li>
      Use forward declarations wherever possible as opposed to including
      full definitions.

      <pre class="example">
      // use a forward declarator:
      class PointToMe;

      // for Arguments 
      void my_function(PointToMe &p, PointToMe *ptm);

      // and for Data
      PointToMe *m;
    
      </pre>
  </li>
 <li>
      The names of variables and functions are to begin with a lowercase
      letter, with underscore word separators.  Names of constants should
      be in all CAPITALS, with underscore word separation.

      <pre class="example">
      static int CONSTANT_INT_FIVE = 5;
      void my_function_name();
      int my_local_variable_name = 0;
      </pre>
  </li>
  <li>
      The names of class member variables are to end with &quot;_&quot;.

      <pre class="example">
      struct SomeObject {
        int count_;
      };
      </pre>
  </li>
 <li>
      The names of abstract data types (eg: Classes), and structs are to
      begin with an uppercase letter, and each new word in the name should
      also be capitolized.
      <pre class="example">
      MyNewClassName
      </pre>
  </li>
 <li>
      Declare a member function, that does not change the state of an object, as &quot;const&quot;.
  </li>
  <li>
      Constants are to be defined using const or enum; never using #define. 
  </li>
  <li>
      A class which uses `new' to allocate instances managed by the
      class, must define a copy constructor, and an assignment operator.
  </li>
 <li>
      All classes which are used as base classes and which have virtual
      functions, must define a virtual destructor.
  </li>
  <li>
      Always use delete[] for deallocating arrays.
  </li>
 <li>
      Use exception handling to trap errors.  [Exceptions should only be
      used for trapping truly exceptional events.]  Our exception model
      includes two levels of exceptions.  The top level of exceptions are
      defined in Classlib/Exceptions.h and are thrown when a Class specific
      exception is not appropriate.  The bottom level of exceptions are
      Class specific, defined in the Class that throws them, and are
      subclassed off of the top level exceptions.  These Class specific
      exceptions are exceptions that can be caught and handled from the
      calling function (1 level above the class.)  However, if the calling
      function chooses not to (or cannot) handle the Class specific
      exception, the exception will propagate to the next level at which
      point it can be trapped and handled in the form of a top level
      exception.  (An example of a Class specific exception would be a
      &quot;StackUnderFlowException&quot; for a stack class.)
  </li>
  <li>
      Comments should support generated documentation format. Comments in
      declarations should be of the form //! ... or /*! ... */. These comments
      will then be visible in our online documentation. Comments in the
      definition part of your code need not have the !, as all the code is
      visible online including comments. Create comments that help the reader
      navigate your code. Comments should help the reader find the area of
      code he/she is looking for quickly.
  </li> 
  <li>
      Do not use identifiers which begin with one or two underscores (`_'
      or `__').
  </li>
  <li>
      Never use the $Id or $Log cvs directives.  This confuses merging
      between branches.
  </li>
  <li>
      Do not use the preprocessor directive #define to obtain more
      efficient code; instead, use inline functions.
  </li>
  <li>
      Avoid the use of numeric values in code; use symbolic values
      instead.  [This applies to numeric values that are repeated within the
      code(s) but represent the same value.  Eg: MAX_ARRAY_SIZE = 1024.]
  </li>
  <li>
      Do not compare a pointer to NULL or assign NULL to a pointer; use 0
      instead.
  </li>
  <li>
      Avoid explicit type conversions (casts) but rather use dynamic_cast ,
      if you must cast, comment why.
  </li>
  <li>
      Never convert a const to a non-const.  [Use &quot;mutable&quot;
      if necesary. However, be aware of the thread safety problems this
      causes.]
  </li>
  <li>
      Never use goto. 
  </li>
  <li>
      Do not use malloc, realloc or free. 
  </li>
</ol>

<p class="head"><a name="sci-advice">SCIRun Advice</a></p>
<ol>
  <li>
      Never use more than 80 columns per line.
  </li>
  <li>
      An include file for a class should have a file name of the form
      &lt;class name&gt; + extension. Use uppercase and lowercase letters in the
      same way as in the source code.
  </li>
  <li>
      Never include /usr/include/*.h (eg: iostream.h) in any .h file.
      This causes a huge amount of code to be recursively included and
      needlessly compiled.  (Use forward declaration.)
  </li>
  <li>
      Group local includes together, then group system includes together.  
  </li>
  <li>
      Avoid global data if at all possible. 
  </li>
  <li>
      Optimize code only if you know that you have a performance problem.
      Think twice before you begin.
  </li>
  <li>
      Always force your compiler to compile with the maximum warning setting,
      and before you check in code, fix all warnings.
  </li>
  <li>
      Place machine-dependent code in a special file so that it may be
      easily located when porting code from one machine to another.
  </li>
  <li>
      Encapsulate global variables and constants, enumerated types, and
      typedefs in a class.
  </li>
  <li>
      Functions in general should not be more than 25 lines long. If you
      find this situation, break the function into several smaller functions.
  </li>
  <li>
      If a function stores a pointer to an object which is accessed via
      an argument, let the argument have the type pointer. Use reference
      arguments in other cases.
  </li>
  <li>
      When overloading functions, all variations should have the same
      semantics (be used for the same purpose).
  </li>
  <li>
      Do not assume that you know how the invocation mechanism for a
      function is implemented.
  </li>
 <li>
      Do not assume that an object is initialized in any special order in
      constructors.
  </li>
  <li>
      Do not assume that static objects are initialized in any special
      order.
  </li>
   <li>
      Use a typedef to simplify program syntax when declaring function
      pointers, or templated types.
  </li>

  <li>
      When two operators are opposites (such as == and !=), it is
      appropriate to define both.
  </li>
  <li>
      Use constant references (const &amp;) instead of call-by-value, unless
      using a pre-defined data type or a pointer.
  </li>
  <li>
      Minimize the number of temporary objects that are created as return
      values from functions or as arguments to functions.
  </li>
  <li>
      Do not write code which is dependent on the lifetime of a temporary
      object.
  </li>
  <li>
      Do not assume that the operands in an expression are evaluated in a
      definite order. Use parenthesis to enforce an order.
  </li>
  <li>
      Use parentheses to clarify the order of evaluation for operators in
      expressions.
  </li>
  <li>
      Avoid using shift operations instead of arithmetic operations. 
  </li>
  <li>
      Use &quot;cout&quot; instead of &quot;printf&quot;.
  </li>
  <li>
      Do not assume that an int and a long have the same size. 
  </li>
  <li>
      Do not assume that pointers and integers have the same size. 
  </li>
  <li>
      Do not assume that longs, floats, doubles or long doubles may begin
      at arbitrary addresses.
  </li>
 <li>
      Avoid pointer arithmetic. 
  </li>
  <li>
      Always use plain char if 8-bit ASCII is used.  Otherwise, use
      signed char or unsigned char.
  </li>
  <li>
      Do not assume that a char is signed or unsigned. 
  </li>
  <li>
      Do not depend on underflow or overflow functioning in any special
      way.
  </li>
</ol>
<!-- ******************************************************************* -->
<!-- *********************** STANDARD SCI FOOTER *********************** -->
<!-- ******************************************************************* -->
<center>
<hr size="1" width="600">
<font size="-1"><a href="http://www.sci.utah.edu">Scientific Computing and Imaging Institute</a> &#149; <a href="http://www.utah.edu">University of Utah</a> &#149; 
(801) 585-1867</font>
</center>
<!-- ********************* END STANDARD SCI FOOTER ********************* -->
<!-- ******************************************************************* -->
</BODY>
</HTML>

